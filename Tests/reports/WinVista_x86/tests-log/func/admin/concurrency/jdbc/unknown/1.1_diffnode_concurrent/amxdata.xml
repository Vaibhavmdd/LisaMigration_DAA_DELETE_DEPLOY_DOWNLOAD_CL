<?xml version="1.0" encoding="UTF-8"?>

<amxdata_base:Enterprise 
	xmlns:amxdata="http://tibco.com/amxadministrator/command/line/types" 
	xmlns:amxdata_base="http://tibco.com/amxadministrator/command/line/types_base" 
	xmlns:amxdata_reference="http://tibco.com/amxadministrator/command/line/types_reference" 
	xmlns:amxdata_jmsssr="http://tibco.com/amxadministrator/command/line/types_jmssr" 
	xmlns:amxdata_jmssr_base="http://tibco.com/amxadministrator/command/line/types_jmssr_base"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xsi:schemaLocation="http://tibco.com/amxadministrator/command/line/types ../schemas/amxdata.xsd
	http://tibco.com/amxadministrator/command/line/types_base ../schemas/amxdata_base.xsd 
	http://tibco.com/amxadministrator/command/line/types_reference ../schemas/amxdata_reference.xsd 
	http://tibco.com/amxadministrator/command/line/types_jmssr ../schemas/jmssr.xsd 
	http://tibco.com/amxadministrator/command/line/types_jmssr_base ../schemas/jmssr_base.xsd">

    <Environment xsi:type="amxdata:Environment" 
		name="DevEnvironment" 
		description="QA Environment for JDBC" 
		contact="jsubrama">
		
		<Node xsi:type="amxdata:Node" 
			description="QA Node 1" 
			contact="TIBCO QA" 
			hostName="SystemHost" 
			name="DevNode"
			portNumber="6021"
			enableDebug="true"
            debugPortNumber="1139">

			<ResourceInstance xsi:type="amxdata:ResourceInstance" name="httpConnectorJdbc" resourceTemplateName="httpConnectorJdbc"/>		
		</Node>
		
		<Node xsi:type="amxdata:Node" 
			description="QA Node 2" 
			contact="TIBCO QA" 
			hostName="SystemHost" 
			name="DevNode1"
			portNumber="6031"
			enableDebug="true"
            debugPortNumber="1139">
					
			<ResourceInstance xsi:type="amxdata:ResourceInstance" name="jdbcResource" resourceTemplateName="jdbcResource"/>
		</Node>
      
		<!--Mapping jdbc.app-->
		<Application xsi:type="amxdata:Application" 
			name="1.1_jdbc.app" 
			contact="jsubrama" 
			description="jdbc - Service and Java1">
				
				<!--Component Java1 of jdbc.app mapped to Node2-->
				<Component xsi:type="amxdata:Component" name="Java1">
	    			<Node name="DevNode1" environmentName="DevEnvironment" />	    	              
	            </Component> 

				<Property  xsi:type="amxdata:Property" name="jdbc_composite"  value="jdbcResource"/>

				<!--Service of jdbc.app mapped to Node1-->
				<PromotedService xsi:type="amxdata_base:Service_base" name="HelloWorldPT">
	    			<Binding xsi:type="amxdata:Binding" name="SOAPService_Binding1">	    		
	    				<Node name="DevNode" environmentName="DevEnvironment"/> 	
						<Property  xsi:type="amxdata:Property" name="HttpInboundConnectionConfig"  value="httpConnectorJdbc"/>
	    			</Binding>	
				</PromotedService>

				<ApplicationTemplate xsi:type="amxdata_reference:ApplicationTemplate_reference"	name="jdbc"/>
        </Application>

    </Environment>
	
    <!--Resource Templates-->
	<ResourceTemplate xsi:type="amxdata:HttpConnectorResourceTemplate"
		name="httpConnectorJdbc"
		host="jpandya-dt"
		port="8784"
		headerBufferSize="4096"
		requestBufferSize="8192"
		responseBufferSize="24576"
		maxIdleTime="200000" 
		lowResourceMaxIdleTime="-1"
		description="Http Connector for Jdbc"/>
		
	<ResourceTemplate
        xsi:type="amxdata:JdbcResourceTemplate"
        name="jdbcResource"
        description="jdbc using xa"
        maxConnections="20">
        <XAConnection
            xsi:type="amxdata:XAConnection"
            dataSourceClass="oracle.jdbc.xa.client.OracleXADataSource"/>
			 <connection-property xsi:type="amxdata:Property" name="URL" value="jdbc:oracle:thin:@(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=tcp)(HOST=10.108.80.142)(PORT=1521)))(CONNECT_DATA=(SERVICE_NAME=orcl)))"/>
        <InlineCredentials
            username="amxuser1"
            password="amxuser1"/>
    </ResourceTemplate>
		
    <!--Get the DAAs-->
    <DAA xsi:type="amxdata:DAA" 
		description="jdbc - Service and Java1" 
		location="jdbc/Deployment Artifacts/jdbc.daa" 
		importResourceTemplates="false"/>

</amxdata_base:Enterprise>
