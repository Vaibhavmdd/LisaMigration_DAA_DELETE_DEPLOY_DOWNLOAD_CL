<html> <body><FONT FACE='arial'> <table width='100%' border='2' cellpadding='4' cellspacing='3'><tr bgcolor='yellow'> <th width='10%'>Event</th> <th width='14%'>Short Description</th> <th width='42%'>Long Description</th><th width='21%'>TimeStamp</th><tr bgcolor='lime'><td>EVENT_START</td><td></td><td></td><td>Thu Aug 09 08:13:34 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>stopTIBCOHost</td><td><pre>Stop TIBCO Host with Mode=abort and Wait=true</pre></td><td>Thu Aug 09 08:13:34 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>stopTIBCOHost</td><td><pre>Stop TIBCO Host with Mode=abort and Wait=true</pre></td><td>Thu Aug 09 08:13:34 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>/groupfiler/tests/tests/amsg/3.0/libraries/amx/com/tibco/tibcohost/StopTibcoHost.tst</pre></td><td>Thu Aug 09 08:13:35 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>stopTIBCOHost-log</td><td><pre></pre></td><td>Thu Aug 09 08:13:35 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>stopTIBCOHost-log</td><td><pre></pre></td><td>Thu Aug 09 08:13:35 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODEMSG</td><td>stopTIBCOHost-log</td><td><pre>Stopping TIBCOHost on host hpita17 at /local/amx320-V61/conf/tibcohost/QA-BAT-Host/host ...</pre></td><td>Thu Aug 09 08:13:35 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>if (host == null || host.equals(""))
 throw new Exception("host is empty!");

if (host.equalsIgnoreCase(LISA_HOST) || host.equals("localhost") || host.equals("127.0.0.1"))
 return "local";
else
 return "rmi://" + host + ":" + simulatorPort + "/" + host;</pre></td><td>Thu Aug 09 08:13:35 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODERESPONSE</td><td>stopTIBCOHost-getSimulator</td><td><pre>local</pre></td><td>Thu Aug 09 08:13:35 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>stopTIBCOHost-validateInputVariables</td><td><pre></pre></td><td>Thu Aug 09 08:13:35 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>stopTIBCOHost-validateInputVariables</td><td><pre></pre></td><td>Thu Aug 09 08:13:35 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>import java.io.File;

String errorMsg = "TIBCOHost Stop Error";

String checkInputVariables() {
	File thFile = null;

    if ((tibcoHostinstance == null) || (tibcoHostinstance.equals(""))) {
		return errorMsg + ": tibcoHostinstance is required";
	}
	if ((host == null) || (host.equals(""))) {
		return errorMsg + ": host is required";
	}
	if ((timeout == null) || (timeout.equals(""))) {
		return errorMsg + ": timeout is required";
	}

    thFile = new File(testExec.parseInState(tibcoHostinstance).replace('\\', '/'));

	if (!thFile.exists()) {
		return errorMsg + ": tibcoHostinstance is not found.";
	}
    if (!thFile.canRead()) {
		return errorMsg + ": tibcoHostinstance cannot be read.";
	}
	if (!thFile.isDirectory()) {
		return errorMsg + "tibcoHostinstance is not a directory.";
	}

	return "TIBCOHost Start-up Validation Success";
}

return checkInputVariables();</pre></td><td>Thu Aug 09 08:13:35 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODERESPONSE</td><td>stopTIBCOHost-validateInputVariables</td><td><pre>TIBCOHost Stop Error: tibcoHostinstance is not found.</pre></td><td>Thu Aug 09 08:13:35 PDT 2012</td> </tr><tr bgcolor='#CC9933'><td>EVENT_ASSERT</td><td>stopTIBCOHost-validateInputVariables [Assert215] </td><td><pre>TIBCOHost Stop Error: tibcoHostinstance is not found.</pre></td><td>Thu Aug 09 08:13:35 PDT 2012</td> </tr><tr bgcolor='#FFA500'><td>EVENT_TRANSFAILED</td><td>stopTIBCOHost</td><td><pre>Sub test case had failure</pre></td><td>Thu Aug 09 08:13:35 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>wait</td><td><pre></pre></td><td>Thu Aug 09 08:13:35 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>wait</td><td><pre></pre></td><td>Thu Aug 09 08:13:35 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>/groupfiler/tests/tests/amsg/3.0/libraries/common/com/tibco/lisa/util/Sleep.tst</pre></td><td>Thu Aug 09 08:13:35 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>wait-Log</td><td><pre></pre></td><td>Thu Aug 09 08:13:35 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>wait-Log</td><td><pre></pre></td><td>Thu Aug 09 08:13:35 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODEMSG</td><td>wait-Log</td><td><pre>Sleeping for 5 on Windows or 5 on Unix ...</pre></td><td>Thu Aug 09 08:13:35 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>wait-sleep</td><td><pre></pre></td><td>Thu Aug 09 08:13:35 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>wait-sleep</td><td><pre></pre></td><td>Thu Aug 09 08:13:35 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>sleep(secStr) {
  try {
    int secInt = Integer.parseInt(secStr);
    if (secInt &lt; 0) Thread.sleep(0);
    else Thread.sleep(secInt*1000);
  }
  catch(NumberFormatException nfe) {
    Thread.sleep(0);
  }
}

if (System.getProperty("os.name").toLowerCase().indexOf("windows") &gt; -1)
  sleep("5");
else
  sleep("5");</pre></td><td>Thu Aug 09 08:13:35 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TESTEND</td><td></td><td></td><td>Thu Aug 09 08:13:31 PDT 2012</td> </tr></table></body></html><tr bgcolor='#CCCC99'><td>EVENT_NODERESPONSE</td><td>wait-sleep</td><td><pre>(no response)</pre></td><td>Thu Aug 09 08:13:41 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>deleteTIBCOHostConfigFolder</td><td><pre></pre></td><td>Thu Aug 09 08:13:41 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>deleteTIBCOHostConfigFolder</td><td><pre></pre></td><td>Thu Aug 09 08:13:41 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>/groupfiler/tests/tests/amsg/3.0/libraries/common/com/tibco/lisa/file/DeleteFile.tst</pre></td><td>Thu Aug 09 08:13:41 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>deleteTIBCOHostConfigFolder-Log</td><td><pre></pre></td><td>Thu Aug 09 08:13:41 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>deleteTIBCOHostConfigFolder-Log</td><td><pre></pre></td><td>Thu Aug 09 08:13:41 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODEMSG</td><td>deleteTIBCOHostConfigFolder-Log</td><td><pre>Deleting /local/amx320-V61/conf/tibcohost ...</pre></td><td>Thu Aug 09 08:13:41 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>deleteTIBCOHostConfigFolder-deleteFile</td><td><pre></pre></td><td>Thu Aug 09 08:13:41 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>deleteTIBCOHostConfigFolder-deleteFile</td><td><pre></pre></td><td>Thu Aug 09 08:13:41 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>import java.io.File;

// This function delete a file or directory recursively
deleteFile(String strFile) {

 File f = new File(strFile);
 String[] strChildren = null;
 boolean deletionOk = false;
 
 if(!f.exists())
  return true;
              
 if (f.isDirectory()) {
  // Get children
  strChildren = f.list();            
  // Go through each child
  for (int i = 0; i &lt; strChildren.length; i++) {
   deletionOk = deleteFile(new File(f, strChildren[i]).getAbsolutePath());
   if (!deletionOk) {
    return false;
   }
  }
 }
 // The directory is now empty so delete it
 return f.delete();
}

// Main
String baseSuccessMsg = "Delete File Success"; // Do not modify. Assertions might exist on this string.
String baseErrorMsg = "Delete File Error"; // Do not modify. Assertions might exist on this string.
fileS = testExec.parseInState(file).replace('\\','/');
try {
 File fileF = new File(fileS);
 String file = fileF.getCanonicalPath();
 if(deleteFile(file))
  return baseSuccessMsg + ": " + file;
 else
  return baseErrorMsg;
}
catch(Exception e) {
 return baseErrorMsg + ": " + e.getMessage();
}</pre></td><td>Thu Aug 09 08:13:41 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODERESPONSE</td><td>deleteTIBCOHostConfigFolder-deleteFile</td><td><pre>Delete File Success: /local/amx320-V61/conf/tibcohost</pre></td><td>Thu Aug 09 08:13:42 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>deleteTIBCOAdminConfigFolder</td><td><pre></pre></td><td>Thu Aug 09 08:13:42 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>deleteTIBCOAdminConfigFolder</td><td><pre></pre></td><td>Thu Aug 09 08:13:42 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>/groupfiler/tests/tests/amsg/3.0/libraries/common/com/tibco/lisa/file/DeleteFile.tst</pre></td><td>Thu Aug 09 08:13:42 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>deleteTIBCOAdminConfigFolder-Log</td><td><pre></pre></td><td>Thu Aug 09 08:13:42 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>deleteTIBCOAdminConfigFolder-Log</td><td><pre></pre></td><td>Thu Aug 09 08:13:42 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODEMSG</td><td>deleteTIBCOAdminConfigFolder-Log</td><td><pre>Deleting /local/amx320-V61/conf/admin ...</pre></td><td>Thu Aug 09 08:13:42 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>deleteTIBCOAdminConfigFolder-deleteFile</td><td><pre></pre></td><td>Thu Aug 09 08:13:42 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>deleteTIBCOAdminConfigFolder-deleteFile</td><td><pre></pre></td><td>Thu Aug 09 08:13:42 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>import java.io.File;

// This function delete a file or directory recursively
deleteFile(String strFile) {

 File f = new File(strFile);
 String[] strChildren = null;
 boolean deletionOk = false;
 
 if(!f.exists())
  return true;
              
 if (f.isDirectory()) {
  // Get children
  strChildren = f.list();            
  // Go through each child
  for (int i = 0; i &lt; strChildren.length; i++) {
   deletionOk = deleteFile(new File(f, strChildren[i]).getAbsolutePath());
   if (!deletionOk) {
    return false;
   }
  }
 }
 // The directory is now empty so delete it
 return f.delete();
}

// Main
String baseSuccessMsg = "Delete File Success"; // Do not modify. Assertions might exist on this string.
String baseErrorMsg = "Delete File Error"; // Do not modify. Assertions might exist on this string.
fileS = testExec.parseInState(file).replace('\\','/');
try {
 File fileF = new File(fileS);
 String file = fileF.getCanonicalPath();
 if(deleteFile(file))
  return baseSuccessMsg + ": " + file;
 else
  return baseErrorMsg;
}
catch(Exception e) {
 return baseErrorMsg + ": " + e.getMessage();
}</pre></td><td>Thu Aug 09 08:13:42 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODERESPONSE</td><td>deleteTIBCOAdminConfigFolder-deleteFile</td><td><pre>Delete File Success: /local/amx320-V61/conf/admin</pre></td><td>Thu Aug 09 08:13:42 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>re-createTIBCOHostConfigFolder</td><td><pre></pre></td><td>Thu Aug 09 08:13:42 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>re-createTIBCOHostConfigFolder</td><td><pre></pre></td><td>Thu Aug 09 08:13:42 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>/groupfiler/tests/tests/amsg/3.0/libraries/common/com/tibco/lisa/file/CreateDirectory.tst</pre></td><td>Thu Aug 09 08:13:42 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>re-createTIBCOHostConfigFolder-Log</td><td><pre></pre></td><td>Thu Aug 09 08:13:42 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>re-createTIBCOHostConfigFolder-Log</td><td><pre></pre></td><td>Thu Aug 09 08:13:42 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODEMSG</td><td>re-createTIBCOHostConfigFolder-Log</td><td><pre>Creating directory "/local/amx320-V61/conf/tibcohost" ...</pre></td><td>Thu Aug 09 08:13:42 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>re-createTIBCOHostConfigFolder-createDirectory</td><td><pre></pre></td><td>Thu Aug 09 08:13:42 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>re-createTIBCOHostConfigFolder-createDirectory</td><td><pre></pre></td><td>Thu Aug 09 08:13:42 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>import java.io.File;

// This function create a directory
createDirectory(String strFile) {
 File f = new File(strFile);
 
 if(f.exists())
  return true;  
 else
  return f.mkdirs();           
}

// Main
//String baseSuccessMsg = "Directory Creation Success"; // Do not modify. Test engineers might assert on this string. 
String baseErrorMsg = "Directory Creation Error"; // Do not modify. Test engineers might assert on this string.
String dir = testExec.getStateString("directory", "&lt;&lt;null&gt;&gt;").replace('\\', '/');
dir = testExec.parseInState(dir).replace('\\', '/');
try {
 if(createDirectory(dir))
  return dir;
 else
  return baseErrorMsg;
}
catch(Exception e) {
 return baseErrorMsg + ": " + e.getMessage();
}</pre></td><td>Thu Aug 09 08:13:42 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODERESPONSE</td><td>re-createTIBCOHostConfigFolder-createDirectory</td><td><pre>/local/amx320-V61/conf/tibcohost</pre></td><td>Thu Aug 09 08:13:42 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>re-createTIBCOAdminConfigFolder</td><td><pre></pre></td><td>Thu Aug 09 08:13:42 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>re-createTIBCOAdminConfigFolder</td><td><pre></pre></td><td>Thu Aug 09 08:13:42 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>/groupfiler/tests/tests/amsg/3.0/libraries/common/com/tibco/lisa/file/CreateDirectory.tst</pre></td><td>Thu Aug 09 08:13:42 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>re-createTIBCOAdminConfigFolder-Log</td><td><pre></pre></td><td>Thu Aug 09 08:13:42 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>re-createTIBCOAdminConfigFolder-Log</td><td><pre></pre></td><td>Thu Aug 09 08:13:42 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODEMSG</td><td>re-createTIBCOAdminConfigFolder-Log</td><td><pre>Creating directory "/local/amx320-V61/conf/admin" ...</pre></td><td>Thu Aug 09 08:13:42 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>re-createTIBCOAdminConfigFolder-createDirectory</td><td><pre></pre></td><td>Thu Aug 09 08:13:42 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>re-createTIBCOAdminConfigFolder-createDirectory</td><td><pre></pre></td><td>Thu Aug 09 08:13:42 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>import java.io.File;

// This function create a directory
createDirectory(String strFile) {
 File f = new File(strFile);
 
 if(f.exists())
  return true;  
 else
  return f.mkdirs();           
}

// Main
//String baseSuccessMsg = "Directory Creation Success"; // Do not modify. Test engineers might assert on this string. 
String baseErrorMsg = "Directory Creation Error"; // Do not modify. Test engineers might assert on this string.
String dir = testExec.getStateString("directory", "&lt;&lt;null&gt;&gt;").replace('\\', '/');
dir = testExec.parseInState(dir).replace('\\', '/');
try {
 if(createDirectory(dir))
  return dir;
 else
  return baseErrorMsg;
}
catch(Exception e) {
 return baseErrorMsg + ": " + e.getMessage();
}</pre></td><td>Thu Aug 09 08:13:42 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODERESPONSE</td><td>re-createTIBCOAdminConfigFolder-createDirectory</td><td><pre>/local/amx320-V61/conf/admin</pre></td><td>Thu Aug 09 08:13:43 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>deleteAMXQueues</td><td><pre></pre></td><td>Thu Aug 09 08:13:43 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>deleteAMXQueues</td><td><pre></pre></td><td>Thu Aug 09 08:13:43 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>/groupfiler/tests/tests/amsg/3.0/libraries/common/com/tibco/lisa/ems/DeleteQueues.tst</pre></td><td>Thu Aug 09 08:13:43 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>deleteAMXQueues-getEMSAdminObject</td><td><pre></pre></td><td>Thu Aug 09 08:13:43 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>deleteAMXQueues-getEMSAdminObject</td><td><pre></pre></td><td>Thu Aug 09 08:13:43 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>/groupfiler/tests/tests/amsg/3.0/libraries/common/com/tibco/lisa/ems/GetEMSAdminObject.tst</pre></td><td>Thu Aug 09 08:13:43 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>deleteAMXQueues-getEMSAdminObject-log</td><td><pre></pre></td><td>Thu Aug 09 08:13:43 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>deleteAMXQueues-getEMSAdminObject-log</td><td><pre></pre></td><td>Thu Aug 09 08:13:43 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODEMSG</td><td>deleteAMXQueues-getEMSAdminObject-log</td><td><pre>Connecting to EMS Admin with following parameters:
url: tcp://AMX-BACKEND-4.na.tibco.com:7222
user: admin
password: admin
trustedCertificate: /groupfiler/tests/tests/amsg/3.0/libraries/common/com/tibco/lisa/ems/server_root.cert.pem</pre></td><td>Thu Aug 09 08:13:43 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>deleteAMXQueues-getEMSAdminObject-validate</td><td><pre></pre></td><td>Thu Aug 09 08:13:43 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>deleteAMXQueues-getEMSAdminObject-validate</td><td><pre></pre></td><td>Thu Aug 09 08:13:43 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>String successMsg = "EMS Validation Success"; // Do not modify, assertions on these strings might exist.
String errorMsg = "EMS Validation Error";

// Check EMS Admin is loadable
try {
    Class.forName("com.tibco.tibjms.admin.TibjmsAdmin");
    return successMsg;
}
catch (Exception e) {
    return errorMsg + ": " + e.getClass().getName() + " " + e.getMessage();
}</pre></td><td>Thu Aug 09 08:13:43 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODERESPONSE</td><td>deleteAMXQueues-getEMSAdminObject-validate</td><td><pre>EMS Validation Success</pre></td><td>Thu Aug 09 08:13:44 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>deleteAMXQueues-getEMSAdminObject-connect</td><td><pre></pre></td><td>Thu Aug 09 08:13:44 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>deleteAMXQueues-getEMSAdminObject-connect</td><td><pre></pre></td><td>Thu Aug 09 08:13:44 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>
import java.util.Hashtable;
import com.tibco.tibjms.admin.TibjmsAdmin;
import com.tibco.tibjms.TibjmsSSL;

String errorMsg = "EMS Error"; // Do not modify, assertions on this string might exist.

String url = testExec.parseInState(url);
String username = testExec.parseInState(username);
String password = testExec.parseInState(password);
String trustedCertificate = testExec.parseInState(trustedCertificate).replace("\\","/");
TibjmsAdmin admin;

try {
    // initialize SSL environment if needed
    if (url.startsWith("ssl")) {
        Hashtable sslEnvironment = new Hashtable();
        sslEnvironment.put(com.tibco.tibjms.TibjmsSSL.TRUSTED_CERTIFICATES, trustedCertificate);
        //sslEnvironment.put(com.tibco.tibjms.TibjmsSSL.IDENTITY, "C:/tibcoems610/ems/6.1/samples/certs/client_identity.p12");
        //sslEnvironment.put(com.tibco.tibjms.TibjmsSSL.PASSWORD, "password");
        //sslEnvironment.put(com.tibco.tibjms.TibjmsSSL.EXPECTED_HOST_NAME, "sbagi-mbp");
        sslEnvironment.put(com.tibco.tibjms.TibjmsSSL.ENABLE_VERIFY_HOST_NAME, new Boolean(false));
        admin = new TibjmsAdmin(url, username, password, sslEnvironment);
    }
    else
        admin = new TibjmsAdmin(url, username, password);
    return admin;
}
catch (Exception e) {
    return errorMsg + ": " + e.getClass().getName() + " " + e.getMessage();
}</pre></td><td>Thu Aug 09 08:13:44 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODERESPONSE</td><td>deleteAMXQueues-getEMSAdminObject-connect</td><td><pre>com.tibco.tibjms.admin.TibjmsAdmin@1aca5e2</pre></td><td>Thu Aug 09 08:13:47 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>deleteAMXQueues-log</td><td><pre></pre></td><td>Thu Aug 09 08:13:48 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>deleteAMXQueues-log</td><td><pre></pre></td><td>Thu Aug 09 08:13:48 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODEMSG</td><td>deleteAMXQueues-log</td><td><pre>Deleting Queues "AMX_SV_hpita17.&gt;" ...</pre></td><td>Thu Aug 09 08:13:48 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>deleteAMXQueues-deleteQueues</td><td><pre></pre></td><td>Thu Aug 09 08:13:48 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>deleteAMXQueues-deleteQueues</td><td><pre></pre></td><td>Thu Aug 09 08:13:48 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>import com.tibco.tibjms.admin.*;

String errorMsg = "EMS Error"; // Do not modify, assertions on this string might exist.
String successMsg = "EMS Queue deletion success";
String msg = "";
String pattern = testExec.parseInState(pattern);

try {
    EMSAdmin.destroyQueues(pattern);
    msg = successMsg;
}
catch (Exception e) {
    msg = errorMsg + ": " + e.getClass().getName() + ". " + e.getMessage();
}
finally {
    EMSAdmin.close();
    return msg;
}</pre></td><td>Thu Aug 09 08:13:48 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODERESPONSE</td><td>deleteAMXQueues-deleteQueues</td><td><pre>EMS Error: com.tibco.tibjms.admin.TibjmsAdminException. No destination matching the given pattern 'AMX_SV_hpita17.&gt;'</pre></td><td>Thu Aug 09 08:13:48 PDT 2012</td> </tr><tr bgcolor='#CC9933'><td>EVENT_ASSERT</td><td>deleteAMXQueues-deleteQueues [Assert120] </td><td><pre>EMS Error: com.tibco.tibjms.admin.TibjmsAdminException. No destination matching the given pattern 'AMX_SV_hpita17.&gt;'</pre></td><td>Thu Aug 09 08:13:48 PDT 2012</td> </tr><tr bgcolor='#FFA500'><td>EVENT_TRANSFAILED</td><td>deleteAMXQueues</td><td><pre>Sub test case had failure</pre></td><td>Thu Aug 09 08:13:48 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>dbSwitch</td><td><pre></pre></td><td>Thu Aug 09 08:13:48 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>dbSwitch</td><td><pre></pre></td><td>Thu Aug 09 08:13:48 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>hsql</pre></td><td>Thu Aug 09 08:13:48 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODERESPONSE</td><td>dbSwitch</td><td><pre>Switching to bootstrapTIBCOHost after comparison match.</pre></td><td>Thu Aug 09 08:13:48 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost</td><td><pre></pre></td><td>Thu Aug 09 08:13:48 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost</td><td><pre></pre></td><td>Thu Aug 09 08:13:48 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>/groupfiler/tests/tests/amsg/3.0/libraries/amx/com/tibco/tibcohost/BootstrapTibcoHost.tst</pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-log</td><td><pre></pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-log</td><td><pre></pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODEMSG</td><td>bootstrapTIBCOHost-log</td><td><pre>Bootstraping TIBCOHost...</pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>import java.io.File;

String errorMsg = "TH Bootstrap Validation Error";

File file = new File(testExec.parseInState(workingDir));
if (!file.exists())
    return errorMsg + ": Directory '" + workingDir + "' does not exist.";
if (!file.isDirectory())
    return erroMsg + ": '" + workingDir + "' must be a directory.";

if (antLogFile.equals(""))
    return errorMsg + ": Log file is required.";

return "Validation success";</pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODERESPONSE</td><td>bootstrapTIBCOHost-validate</td><td><pre>Validation success</pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>if (propFile.equals(""))
    return true;
else
    return testExec.parseInState(propFile).replace("\\","/");</pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODERESPONSE</td><td>bootstrapTIBCOHost-checkPropFileEmpty</td><td><pre>true</pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#CC9933'><td>EVENT_ASSERT</td><td>bootstrapTIBCOHost-checkPropFileEmpty [Assert181] </td><td><pre>Prop file is not set. Let's create it...</pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-copyTHLogConfigFile</td><td><pre></pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-copyTHLogConfigFile</td><td><pre></pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>/groupfiler/tests/tests/amsg/3.0/libraries/common/com/tibco/lisa/file/CopyFile.tst</pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-copyTHLogConfigFile-Log</td><td><pre></pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-copyTHLogConfigFile-Log</td><td><pre></pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODEMSG</td><td>bootstrapTIBCOHost-copyTHLogConfigFile-Log</td><td><pre>Copying file 
"/groupfiler/tests/tests/amsg/3.0/libraries/amx/com/tibco/tibcohost/hpa-log4j.xml.template" to 
"/groupfiler/tests/tests/amsg/3.0/reports/HP-UX_B.11.31_IA64N/amsg-320-V61/func/admin/lifecycle/lifecycle_4node_hsql/setup/hpa-log4j.xml"</pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#CC9933'><td>EVENT_ASSERT</td><td>bootstrapTIBCOHost-copyTHLogConfigFile-Log [Assert106] </td><td><pre>Destination directory will be created...</pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-copyTHLogConfigFile-getDirectory</td><td><pre></pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-copyTHLogConfigFile-getDirectory</td><td><pre></pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>String file = testExec.parseInState(fileOut).replace('\\','/');
File f = new File(file);

if (f.isDirectory())
 return file;
else 
 return f.getParent();</pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODERESPONSE</td><td>bootstrapTIBCOHost-copyTHLogConfigFile-getDirectory</td><td><pre>/groupfiler/tests/tests/amsg/3.0/reports/HP-UX_B.11.31_IA64N/amsg-320-V61/func/admin/lifecycle/lifecycle_4node_hsql/setup</pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-copyTHLogConfigFile-createDirectory</td><td><pre></pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-copyTHLogConfigFile-createDirectory</td><td><pre></pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>/groupfiler/tests/tests/amsg/3.0/libraries/common/com/tibco/lisa/file/CreateDirectory.tst</pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-copyTHLogConfigFile-createDirectory-Log</td><td><pre></pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-copyTHLogConfigFile-createDirectory-Log</td><td><pre></pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODEMSG</td><td>bootstrapTIBCOHost-copyTHLogConfigFile-createDirectory-Log</td><td><pre>Creating directory "/groupfiler/tests/tests/amsg/3.0/reports/HP-UX_B.11.31_IA64N/amsg-320-V61/func/admin/lifecycle/lifecycle_4node_hsql/setup" ...</pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-copyTHLogConfigFile-createDirectory-createDirectory</td><td><pre></pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-copyTHLogConfigFile-createDirectory-createDirectory</td><td><pre></pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>import java.io.File;

// This function create a directory
createDirectory(String strFile) {
 File f = new File(strFile);
 
 if(f.exists())
  return true;  
 else
  return f.mkdirs();           
}

// Main
//String baseSuccessMsg = "Directory Creation Success"; // Do not modify. Test engineers might assert on this string. 
String baseErrorMsg = "Directory Creation Error"; // Do not modify. Test engineers might assert on this string.
String dir = testExec.getStateString("directory", "&lt;&lt;null&gt;&gt;").replace('\\', '/');
dir = testExec.parseInState(dir).replace('\\', '/');
try {
 if(createDirectory(dir))
  return dir;
 else
  return baseErrorMsg;
}
catch(Exception e) {
 return baseErrorMsg + ": " + e.getMessage();
}</pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODERESPONSE</td><td>bootstrapTIBCOHost-copyTHLogConfigFile-createDirectory-createDirectory</td><td><pre>/groupfiler/tests/tests/amsg/3.0/reports/HP-UX_B.11.31_IA64N/amsg-320-V61/func/admin/lifecycle/lifecycle_4node_hsql/setup</pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-copyTHLogConfigFile-copyFile</td><td><pre></pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-copyTHLogConfigFile-copyFile</td><td><pre></pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>import java.io.*;

copyFile(String fileIn, String fileOut) {
 // Do not modify next 2 variables. 
 // Test engineers might have assertion on these strings.
 String baseSuccessMsg = "File Copy Success";
 String baseErrorMsg = "File Copy Error";

 try {
  File fi = new File(fileIn);
  File fo = new File(fileOut);

  // We don't copy directory!
  if (fi.isDirectory())
   return baseErrorMsg + ": Source cannot be a directory !"; 
  
  // If destination is a directory, we'll copy the source file in there
  if (fo.exists() && fo.isDirectory())
   fo = new File(fo, fi.getName());

  FileInputStream fis  = new FileInputStream(fi);
  FileOutputStream fos = new FileOutputStream(fo);
  
  byte[] buf = new byte[1024];
  int i = 0;
  while((i = fis.read(buf))!= -1) {
   fos.write(buf, 0, i);
  }
  fis.close();
  fos.close();
  return fileOut;
 }
 catch (Exception e) {
  return baseErrorMsg + ": " + e.getMessage();
 }
}

// Main
fileIn = testExec.parseInState(fileIn).replace('\\','/');
fileOut = testExec.parseInState(fileOut).replace('\\','/');
return copyFile(fileIn, fileOut);</pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODERESPONSE</td><td>bootstrapTIBCOHost-copyTHLogConfigFile-copyFile</td><td><pre>/groupfiler/tests/tests/amsg/3.0/reports/HP-UX_B.11.31_IA64N/amsg-320-V61/func/admin/lifecycle/lifecycle_4node_hsql/setup/hpa-log4j.xml</pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-replaceInTHLogConfigFile</td><td><pre></pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-replaceInTHLogConfigFile</td><td><pre></pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>/groupfiler/tests/tests/amsg/3.0/libraries/common/com/tibco/lisa/file/ReplaceInFile.tst</pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-replaceInTHLogConfigFile-Log</td><td><pre></pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-replaceInTHLogConfigFile-Log</td><td><pre></pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODEMSG</td><td>bootstrapTIBCOHost-replaceInTHLogConfigFile-Log</td><td><pre>Replacing the following Strings in file "/groupfiler/tests/tests/amsg/3.0/reports/HP-UX_B.11.31_IA64N/amsg-320-V61/func/admin/lifecycle/lifecycle_4node_hsql/setup/hpa-log4j.xml":

amx.th.instance.log=/groupfiler/tests/tests/amsg/3.0/reports/HP-UX_B.11.31_IA64N/amsg-320-V61/func/admin/lifecycle/lifecycle_4node_hsql/setup/tibcohost.log,amx.th.instance.nodestdout.log=/groupfiler/tests/tests/amsg/3.0/reports/HP-UX_B.11.31_IA64N/amsg-320-V61/func/admin/lifecycle/lifecycle_4node_hsql/setup/node-stdout.log
 </pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-replaceInTHLogConfigFile-validate</td><td><pre></pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-replaceInTHLogConfigFile-validate</td><td><pre></pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>baseSuccessMsg = "Replace Validation Success";
baseErrorMsg = "Replace Validation Error"; // there is an assertion on this string
String file = testExec.parseInState(file).replace('\\','/');
File f = new File(file);

// Check if file exists
if (!f.exists())
 return baseErrorMsg + ": File ('" + file + "') does not exist";

// If fileName is a directory, we fail.
if(f.isDirectory())
 return baseErrorMsg + ": File passed is a directory! It must be a file.";

// If cannot write
if (!f.canWrite())
  return baseErrorMsg + ": Cannot write in file '" + file + "'.";

//This can now be optional as users can use propertyFile/List.
// Old string cannot be empty
if((oldString.equals("")) && (propertyFileName.equals("")) && (propertyList.equals("")))
 return baseErrorMsg + ": User should specify either oldString or propertyFileName or propertyList";

File propertyFile = null;
if ((propertyFileName != null) && (!propertyFileName.equals(""))) {
	propertyFile = new File(testExec.parseInState(propertyFileName).replace('\\', '/'));
	if (!propertyFile.canRead()) {
		return baseErrorMsg + ": Property file not found/cannot read it. "+propertyFileName;
	}
	if (!propertyFile.isFile()) {
		return baseErrorMsg + ": property file is not a normal file. "+propertyFileName;
	}		
}

return baseSuccessMsg;</pre></td><td>Thu Aug 09 08:13:49 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODERESPONSE</td><td>bootstrapTIBCOHost-replaceInTHLogConfigFile-validate</td><td><pre>Replace Validation Success</pre></td><td>Thu Aug 09 08:13:50 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>import java.io.File;
import java.io.FileInputStream;
import java.util.Properties;

	Properties getPropList() {
		Properties props = new Properties();
		File propertyFile = null;
		FileInputStream fis = null;
		
		oldStr = testExec.parseInState(oldString.toString());
		newStr = testExec.parseInState(newString.toString());
		
		try {
			if ((propertyFileName != null) && (!propertyFileName.equals(""))) {
				propertyFile = new File(testExec.parseInState(propertyFileName).replace('\\', '/'));
				fis = new FileInputStream(propertyFile);
				props.load(fis);
				
			}
			
			if ((propertyList != null) && (!propertyList.equals(""))) {
				String [] propArray = propertyList.split(",");
				for (int i =0; i &lt; propArray.length; i++) {
					String [] keyPair = propArray[i].split("=");
					if (keyPair.length == 1) continue;
					props.setProperty(keyPair[0],keyPair[1]);
				}
			}
			
            if (!oldStr.equals("")) {
                props.setProperty(oldStr,newStr);
            }
		
		}catch(Exception e) {
			response = "Fail: Failed to compute property list."+e.getLocalizedMessage();			
		}
		finally {
			try {				
				if (fis != null) fis.close();				
			}catch(Exception ioe) {
				//ignore.
			}
		}
		return props;
	}
return getPropList();</pre></td><td>Thu Aug 09 08:13:50 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODERESPONSE</td><td>bootstrapTIBCOHost-replaceInTHLogConfigFile-getFullPropertyList</td><td><pre>{amx.th.instance.nodestdout.log=/groupfiler/tests/tests/amsg/3.0/reports/HP-UX_B.11.31_IA64N/amsg-320-V61/func/admin/lifecycle/lifecycle_4node_hsql/setup/node-stdout.log, amx.th.instance.log=/groupfiler/tests/tests/amsg/3.0/reports/HP-UX_B.11.31_IA64N/amsg-320-V61/func/admin/lifecycle/lifecycle_4node_hsql/setup/tibcohost.log}</pre></td><td>Thu Aug 09 08:13:50 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-replaceInTHLogConfigFile-readFile</td><td><pre></pre></td><td>Thu Aug 09 08:13:50 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-replaceInTHLogConfigFile-readFile</td><td><pre></pre></td><td>Thu Aug 09 08:13:50 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>/groupfiler/tests/tests/amsg/3.0/libraries/common/com/tibco/lisa/file/ReadFile.tst</pre></td><td>Thu Aug 09 08:13:50 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-replaceInTHLogConfigFile-readFile-Log</td><td><pre></pre></td><td>Thu Aug 09 08:13:50 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-replaceInTHLogConfigFile-readFile-Log</td><td><pre></pre></td><td>Thu Aug 09 08:13:50 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODEMSG</td><td>bootstrapTIBCOHost-replaceInTHLogConfigFile-readFile-Log</td><td><pre>Reading file "/groupfiler/tests/tests/amsg/3.0/reports/HP-UX_B.11.31_IA64N/amsg-320-V61/func/admin/lifecycle/lifecycle_4node_hsql/setup/hpa-log4j.xml" ...</pre></td><td>Thu Aug 09 08:13:50 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-replaceInTHLogConfigFile-readFile-readFile</td><td><pre></pre></td><td>Thu Aug 09 08:13:50 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-replaceInTHLogConfigFile-readFile-readFile</td><td><pre></pre></td><td>Thu Aug 09 08:13:50 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>import java.io.*;

String baseErrorMsg = "File Read Error"; // Do not modify. Test engineers might assert on this string.
String strFile = testExec.parseInState(file).replace('\\', '/');

File file = new File(strFile);
if (!file.exists())
  return baseErrorMsg + ": File '" + file + "' does not exist.";
if (!file.canRead())
  return baseErrorMsg + ": Cannot be read file '" + file + "'.";
if (!file.isFile())
  return baseErrorMsg + ": '" + file + "' is not a file.";

BufferedReader input=null;

try {
    if (encoding.equals("")) 
        input = new BufferedReader(new InputStreamReader(new FileInputStream(file)));
    else 	
        input = new BufferedReader(new InputStreamReader  
				  (new FileInputStream(file),encoding));

    //BufferedReader input = new BufferedReader(new FileReader(file));
    StringBuffer content = new StringBuffer();
    String line = null;
    /*
    * readLine is a bit quirky :
    * it returns the content of a line MINUS the newline.
    * it returns null only for the END of the stream.
    * it returns an empty String if two newlines appear in a row.
    */
    while ((line = input.readLine()) != null) {
        content.append(line);
        content.append(System.getProperty("line.separator"));
    }
    //flush and close both "input" and its underlying FileReader
    input.close();
    return content.toString();
}
catch(Exception e) {
    return baseErrorMsg + ": " + e.getMessage();
}
</pre></td><td>Thu Aug 09 08:13:50 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODERESPONSE</td><td>bootstrapTIBCOHost-replaceInTHLogConfigFile-readFile-readFile</td><td><pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE log4j:configuration SYSTEM "log4j.dtd"&gt;

&lt;log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/"&gt;
    &lt;appender name="ASYNC" class="org.apache.log4j.AsyncAppender"&gt;
        &lt;appender-ref ref="FILE"/&gt;
    &lt;/appender&gt;
    
    &lt;appender name="CONSOLE" class="org.apache.log4j.ConsoleAppender"&gt;
        &lt;param name="Target" value="System.out"/&gt;
        &lt;param name="Threshold" value="DEBUG"/&gt;
        &lt;layout class="org.apache.log4j.PatternLayout"&gt;
            &lt;param name="ConversionPattern" value="[%t] [%-5p] %c - %m%n"/&gt; 
        &lt;/layout&gt;
    &lt;/appender&gt;

   &lt;appender name="FILE" class="com.tibco.commonlogging.appender.CommonRollingFileAppender"&gt;
     &lt;param name="File" value="[[amx.th.instance.log]]"/&gt;
     &lt;param name="Append" value="true"/&gt;
      &lt;layout class="com.tibco.tpcl.org.apache.log4j.PatternLayoutEx"&gt;
        &lt;param name="ConversionPattern" value="%d{dd MMM yyyy HH:mm:ss,SSS} [%t] [%-5p] %c - %m%n"/&gt;
      &lt;/layout&gt;
     &lt;!-- 
     &lt;layout class="com.tibco.commonlogging.appender.BEF2CBELayout"/&gt;
     --&gt;
  &lt;/appender&gt;
  
   &lt;appender name="NODE_STDOUT" class="com.tibco.commonlogging.appender.CommonRollingFileAppender"&gt;
     &lt;param name="File" value="[[amx.th.instance.nodestdout.log]]"/&gt;
     &lt;param name="Append" value="false"/&gt;
     &lt;layout class="org.apache.log4j.PatternLayout"&gt;
       &lt;param name="ConversionPattern" value="%d{dd MMM yyyy HH:mm:ss,SSS} %c - %m%n"/&gt;
     &lt;/layout&gt;
   &lt;/appender&gt;
  
    &lt;logger name="com.tibco.amf.hpa.tibcohost.NodeProxy" additivity="false"&gt;
        &lt;level value="info"/&gt;
        &lt;appender-ref ref="NODE_STDOUT"/&gt;
    &lt;/logger&gt;
    
    &lt;root&gt;
        &lt;priority value ="info" /&gt; 
        &lt;appender-ref ref="FILE"/&gt;
        &lt;appender-ref ref="CONSOLE"/&gt;
    &lt;/root&gt;
&lt;/log4j:configuration&gt;
</pre></td><td>Thu Aug 09 08:13:50 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>import java.util.Properties;
import java.util.Set;

// convert to String because it can comes as Boolean or Integer!
// Replace
// return fileContent.replace(oldStr.subSequence(0,oldStr.length()), newStr.subSequence(0, newStr.length()));
//return fileContent.substring(0, fileContent.indexOf(oldString)) + newString + fileContent.substring((fileContent.indexOf(oldString) + oldString.length()), fileContent.length());

	String replace() {
		String response = fileContent;
        Properties props = propList;
		try {	
            if (prefix == null) prefix = "";
			if (suffix == null) suffix = "";

			if (!props.isEmpty()) {
				
				Set keySet = props.keySet();
				for (Object key: keySet) {
					String name = prefix+(String)key+suffix;
					String  value = testExec.parseInState((String)props.get(key));					
					response = response.replace(name.subSequence(0,name.length()), value.subSequence(0, value.length()));
				}
			}
		}
        catch(Exception e) {
			response = "Fail: Failed to replace."+e.getLocalizedMessage();			
		}
		return response;
	}
return replace();</pre></td><td>Thu Aug 09 08:13:50 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODERESPONSE</td><td>bootstrapTIBCOHost-replaceInTHLogConfigFile-replaceContent</td><td><pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE log4j:configuration SYSTEM "log4j.dtd"&gt;

&lt;log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/"&gt;
    &lt;appender name="ASYNC" class="org.apache.log4j.AsyncAppender"&gt;
        &lt;appender-ref ref="FILE"/&gt;
    &lt;/appender&gt;
    
    &lt;appender name="CONSOLE" class="org.apache.log4j.ConsoleAppender"&gt;
        &lt;param name="Target" value="System.out"/&gt;
        &lt;param name="Threshold" value="DEBUG"/&gt;
        &lt;layout class="org.apache.log4j.PatternLayout"&gt;
            &lt;param name="ConversionPattern" value="[%t] [%-5p] %c - %m%n"/&gt; 
        &lt;/layout&gt;
    &lt;/appender&gt;

   &lt;appender name="FILE" class="com.tibco.commonlogging.appender.CommonRollingFileAppender"&gt;
     &lt;param name="File" value="/groupfiler/tests/tests/amsg/3.0/reports/HP-UX_B.11.31_IA64N/amsg-320-V61/func/admin/lifecycle/lifecycle_4node_hsql/setup/tibcohost.log"/&gt;
     &lt;param name="Append" value="true"/&gt;
      &lt;layout class="com.tibco.tpcl.org.apache.log4j.PatternLayoutEx"&gt;
        &lt;param name="ConversionPattern" value="%d{dd MMM yyyy HH:mm:ss,SSS} [%t] [%-5p] %c - %m%n"/&gt;
      &lt;/layout&gt;
     &lt;!-- 
     &lt;layout class="com.tibco.commonlogging.appender.BEF2CBELayout"/&gt;
     --&gt;
  &lt;/appender&gt;
  
   &lt;appender name="NODE_STDOUT" class="com.tibco.commonlogging.appender.CommonRollingFileAppender"&gt;
     &lt;param name="File" value="/groupfiler/tests/tests/amsg/3.0/reports/HP-UX_B.11.31_IA64N/amsg-320-V61/func/admin/lifecycle/lifecycle_4node_hsql/setup/node-stdout.log"/&gt;
     &lt;param name="Append" value="false"/&gt;
     &lt;layout class="org.apache.log4j.PatternLayout"&gt;
       &lt;param name="ConversionPattern" value="%d{dd MMM yyyy HH:mm:ss,SSS} %c - %m%n"/&gt;
     &lt;/layout&gt;
   &lt;/appender&gt;
  
    &lt;logger name="com.tibco.amf.hpa.tibcohost.NodeProxy" additivity="false"&gt;
        &lt;level value="info"/&gt;
        &lt;appender-ref ref="NODE_STDOUT"/&gt;
    &lt;/logger&gt;
    
    &lt;root&gt;
        &lt;priority value ="info" /&gt; 
        &lt;appender-ref ref="FILE"/&gt;
        &lt;appender-ref ref="CONSOLE"/&gt;
    &lt;/root&gt;
&lt;/log4j:configuration&gt;
</pre></td><td>Thu Aug 09 08:13:50 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-replaceInTHLogConfigFile-writeFile</td><td><pre></pre></td><td>Thu Aug 09 08:13:50 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-replaceInTHLogConfigFile-writeFile</td><td><pre></pre></td><td>Thu Aug 09 08:13:50 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>/groupfiler/tests/tests/amsg/3.0/libraries/common/com/tibco/lisa/file/WriteFile.tst</pre></td><td>Thu Aug 09 08:13:50 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-replaceInTHLogConfigFile-writeFile-Log</td><td><pre></pre></td><td>Thu Aug 09 08:13:50 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-replaceInTHLogConfigFile-writeFile-Log</td><td><pre></pre></td><td>Thu Aug 09 08:13:50 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODEMSG</td><td>bootstrapTIBCOHost-replaceInTHLogConfigFile-writeFile-Log</td><td><pre>Writing in file "/groupfiler/tests/tests/amsg/3.0/reports/HP-UX_B.11.31_IA64N/amsg-320-V61/func/admin/lifecycle/lifecycle_4node_hsql/setup/hpa-log4j.xml" ...
</pre></td><td>Thu Aug 09 08:13:50 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-replaceInTHLogConfigFile-writeFile-checkCreateFile</td><td><pre></pre></td><td>Thu Aug 09 08:13:50 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-replaceInTHLogConfigFile-writeFile-checkCreateFile</td><td><pre></pre></td><td>Thu Aug 09 08:13:50 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-replaceInTHLogConfigFile-writeFile-writeFile</td><td><pre></pre></td><td>Thu Aug 09 08:13:50 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-replaceInTHLogConfigFile-writeFile-writeFile</td><td><pre></pre></td><td>Thu Aug 09 08:13:50 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>import java.io.*;

String baseErrorMsg = "File Write Error"; // Do not modify. Test engineers might assert on this string.
String baseSuccessMsg = "File Write Success"; // Do not modify. Test engineers might assert on this string.
String strFile = testExec.parseInState(file).replace('\\', '/');

File fileHandle = new File(strFile);
if (!fileHandle.exists())
  return baseErrorMsg + ": File '" + fileHandle + "' does not exist.";
if (!fileHandle.isFile())
  return baseErrorMsg + ": '" + fileHandle + "' is not a file.";
if (!fileHandle.canWrite())
  return baseErrorMsg + ": Cannot write in file '" + fileHandle + "'.";

if (encoding.equals("")) {
        BufferedWriter output = new BufferedWriter(new OutputStreamWriter
                                 (new FileOutputStream(fileHandle)));
	output.write(content);
	output.close();
	return baseSuccessMsg + ": File '" + fileHandle + "' now contains: \n" + content;
} else {
	BufferedWriter output = new BufferedWriter(new OutputStreamWriter
                                 (new FileOutputStream(fileHandle),encoding));
	output.write(content);
	output.close();
	return baseSuccessMsg + ": File '" + fileHandle + "' now contains: \n" + content;
}</pre></td><td>Thu Aug 09 08:13:50 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODERESPONSE</td><td>bootstrapTIBCOHost-replaceInTHLogConfigFile-writeFile-writeFile</td><td><pre>File Write Success: File '/groupfiler/tests/tests/amsg/3.0/reports/HP-UX_B.11.31_IA64N/amsg-320-V61/func/admin/lifecycle/lifecycle_4node_hsql/setup/hpa-log4j.xml' now contains: 
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE log4j:configuration SYSTEM "log4j.dtd"&gt;

&lt;log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/"&gt;
    &lt;appender name="ASYNC" class="org.apache.log4j.AsyncAppender"&gt;
        &lt;appender-ref ref="FILE"/&gt;
    &lt;/appender&gt;
    
    &lt;appender name="CONSOLE" class="org.apache.log4j.ConsoleAppender"&gt;
        &lt;param name="Target" value="System.out"/&gt;
        &lt;param name="Threshold" value="DEBUG"/&gt;
        &lt;layout class="org.apache.log4j.PatternLayout"&gt;
            &lt;param name="ConversionPattern" value="[%t] [%-5p] %c - %m%n"/&gt; 
        &lt;/layout&gt;
    &lt;/appender&gt;

   &lt;appender name="FILE" class="com.tibco.commonlogging.appender.CommonRollingFileAppender"&gt;
     &lt;param name="File" value="/groupfiler/tests/tests/amsg/3.0/reports/HP-UX_B.11.31_IA64N/amsg-320-V61/func/admin/lifecycle/lifecycle_4node_hsql/setup/tibcohost.log"/&gt;
     &lt;param name="Append" value="true"/&gt;
      &lt;layout class="com.tibco.tpcl.org.apache.log4j.PatternLayoutEx"&gt;
        &lt;param name="ConversionPattern" value="%d{dd MMM yyyy HH:mm:ss,SSS} [%t] [%-5p] %c - %m%n"/&gt;
      &lt;/layout&gt;
     &lt;!-- 
     &lt;layout class="com.tibco.commonlogging.appender.BEF2CBELayout"/&gt;
     --&gt;
  &lt;/appender&gt;
  
   &lt;appender name="NODE_STDOUT" class="com.tibco.commonlogging.appender.CommonRollingFileAppender"&gt;
     &lt;param name="File" value="/groupfiler/tests/tests/amsg/3.0/reports/HP-UX_B.11.31_IA64N/amsg-320-V61/func/admin/lifecycle/lifecycle_4node_hsql/setup/node-stdout.log"/&gt;
     &lt;param name="Append" value="false"/&gt;
     &lt;layout class="org.apache.log4j.PatternLayout"&gt;
       &lt;param name="ConversionPattern" value="%d{dd MMM yyyy HH:mm:ss,SSS} %c - %m%n"/&gt;
     &lt;/layout&gt;
   &lt;/appender&gt;
  
    &lt;logger name="com.tibco.amf.hpa.tibcohost.NodeProxy" additivity="false"&gt;
        &lt;level value="info"/&gt;
        &lt;appender-ref ref="NODE_STDOUT"/&gt;
    &lt;/logger&gt;
    
    &lt;root&gt;
        &lt;priority value ="info" /&gt; 
        &lt;appender-ref ref="FILE"/&gt;
        &lt;appender-ref ref="CONSOLE"/&gt;
    &lt;/root&gt;
&lt;/log4j:configuration&gt;
</pre></td><td>Thu Aug 09 08:13:50 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-replaceInTHLogConfigFile-writeFile-success</td><td><pre></pre></td><td>Thu Aug 09 08:13:50 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-replaceInTHLogConfigFile-writeFile-success</td><td><pre></pre></td><td>Thu Aug 09 08:13:50 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>return testExec.parseInState(file).replace('\\','/');</pre></td><td>Thu Aug 09 08:13:50 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODERESPONSE</td><td>bootstrapTIBCOHost-replaceInTHLogConfigFile-writeFile-success</td><td><pre>/groupfiler/tests/tests/amsg/3.0/reports/HP-UX_B.11.31_IA64N/amsg-320-V61/func/admin/lifecycle/lifecycle_4node_hsql/setup/hpa-log4j.xml</pre></td><td>Thu Aug 09 08:13:50 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-replaceInTHLogConfigFile-success</td><td><pre></pre></td><td>Thu Aug 09 08:13:50 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-replaceInTHLogConfigFile-success</td><td><pre></pre></td><td>Thu Aug 09 08:13:50 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>return "Successfully replaced '" + propList.toString() + "' in file '" + testExec.parseInState(file.toString()) + "'";</pre></td><td>Thu Aug 09 08:13:50 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODERESPONSE</td><td>bootstrapTIBCOHost-replaceInTHLogConfigFile-success</td><td><pre>Successfully replaced '{amx.th.instance.nodestdout.log=/groupfiler/tests/tests/amsg/3.0/reports/HP-UX_B.11.31_IA64N/amsg-320-V61/func/admin/lifecycle/lifecycle_4node_hsql/setup/node-stdout.log, amx.th.instance.log=/groupfiler/tests/tests/amsg/3.0/reports/HP-UX_B.11.31_IA64N/amsg-320-V61/func/admin/lifecycle/lifecycle_4node_hsql/setup/tibcohost.log}' in file '/groupfiler/tests/tests/amsg/3.0/reports/HP-UX_B.11.31_IA64N/amsg-320-V61/func/admin/lifecycle/lifecycle_4node_hsql/setup/hpa-log4j.xml'</pre></td><td>Thu Aug 09 08:13:50 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-copyNodeStdoutLogConfigFile</td><td><pre></pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-copyNodeStdoutLogConfigFile</td><td><pre></pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>/groupfiler/tests/tests/amsg/3.0/libraries/common/com/tibco/lisa/file/CopyFile.tst</pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-copyNodeStdoutLogConfigFile-Log</td><td><pre></pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-copyNodeStdoutLogConfigFile-Log</td><td><pre></pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODEMSG</td><td>bootstrapTIBCOHost-copyNodeStdoutLogConfigFile-Log</td><td><pre>Copying file 
"/groupfiler/tests/tests/amsg/3.0/libraries/amx/com/tibco/tibcohost/node-log4j.xml.template" to 
"/groupfiler/tests/tests/amsg/3.0/reports/HP-UX_B.11.31_IA64N/amsg-320-V61/func/admin/lifecycle/lifecycle_4node_hsql/setup/node-log4j.xml"</pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#CC9933'><td>EVENT_ASSERT</td><td>bootstrapTIBCOHost-copyNodeStdoutLogConfigFile-Log [Assert106] </td><td><pre>Destination directory will be created...</pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-copyNodeStdoutLogConfigFile-getDirectory</td><td><pre></pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-copyNodeStdoutLogConfigFile-getDirectory</td><td><pre></pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>String file = testExec.parseInState(fileOut).replace('\\','/');
File f = new File(file);

if (f.isDirectory())
 return file;
else 
 return f.getParent();</pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODERESPONSE</td><td>bootstrapTIBCOHost-copyNodeStdoutLogConfigFile-getDirectory</td><td><pre>/groupfiler/tests/tests/amsg/3.0/reports/HP-UX_B.11.31_IA64N/amsg-320-V61/func/admin/lifecycle/lifecycle_4node_hsql/setup</pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-copyNodeStdoutLogConfigFile-createDirectory</td><td><pre></pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-copyNodeStdoutLogConfigFile-createDirectory</td><td><pre></pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>/groupfiler/tests/tests/amsg/3.0/libraries/common/com/tibco/lisa/file/CreateDirectory.tst</pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-copyNodeStdoutLogConfigFile-createDirectory-Log</td><td><pre></pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-copyNodeStdoutLogConfigFile-createDirectory-Log</td><td><pre></pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODEMSG</td><td>bootstrapTIBCOHost-copyNodeStdoutLogConfigFile-createDirectory-Log</td><td><pre>Creating directory "/groupfiler/tests/tests/amsg/3.0/reports/HP-UX_B.11.31_IA64N/amsg-320-V61/func/admin/lifecycle/lifecycle_4node_hsql/setup" ...</pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-copyNodeStdoutLogConfigFile-createDirectory-createDirectory</td><td><pre></pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-copyNodeStdoutLogConfigFile-createDirectory-createDirectory</td><td><pre></pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>import java.io.File;

// This function create a directory
createDirectory(String strFile) {
 File f = new File(strFile);
 
 if(f.exists())
  return true;  
 else
  return f.mkdirs();           
}

// Main
//String baseSuccessMsg = "Directory Creation Success"; // Do not modify. Test engineers might assert on this string. 
String baseErrorMsg = "Directory Creation Error"; // Do not modify. Test engineers might assert on this string.
String dir = testExec.getStateString("directory", "&lt;&lt;null&gt;&gt;").replace('\\', '/');
dir = testExec.parseInState(dir).replace('\\', '/');
try {
 if(createDirectory(dir))
  return dir;
 else
  return baseErrorMsg;
}
catch(Exception e) {
 return baseErrorMsg + ": " + e.getMessage();
}</pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODERESPONSE</td><td>bootstrapTIBCOHost-copyNodeStdoutLogConfigFile-createDirectory-createDirectory</td><td><pre>/groupfiler/tests/tests/amsg/3.0/reports/HP-UX_B.11.31_IA64N/amsg-320-V61/func/admin/lifecycle/lifecycle_4node_hsql/setup</pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-copyNodeStdoutLogConfigFile-copyFile</td><td><pre></pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-copyNodeStdoutLogConfigFile-copyFile</td><td><pre></pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>import java.io.*;

copyFile(String fileIn, String fileOut) {
 // Do not modify next 2 variables. 
 // Test engineers might have assertion on these strings.
 String baseSuccessMsg = "File Copy Success";
 String baseErrorMsg = "File Copy Error";

 try {
  File fi = new File(fileIn);
  File fo = new File(fileOut);

  // We don't copy directory!
  if (fi.isDirectory())
   return baseErrorMsg + ": Source cannot be a directory !"; 
  
  // If destination is a directory, we'll copy the source file in there
  if (fo.exists() && fo.isDirectory())
   fo = new File(fo, fi.getName());

  FileInputStream fis  = new FileInputStream(fi);
  FileOutputStream fos = new FileOutputStream(fo);
  
  byte[] buf = new byte[1024];
  int i = 0;
  while((i = fis.read(buf))!= -1) {
   fos.write(buf, 0, i);
  }
  fis.close();
  fos.close();
  return fileOut;
 }
 catch (Exception e) {
  return baseErrorMsg + ": " + e.getMessage();
 }
}

// Main
fileIn = testExec.parseInState(fileIn).replace('\\','/');
fileOut = testExec.parseInState(fileOut).replace('\\','/');
return copyFile(fileIn, fileOut);</pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODERESPONSE</td><td>bootstrapTIBCOHost-copyNodeStdoutLogConfigFile-copyFile</td><td><pre>/groupfiler/tests/tests/amsg/3.0/reports/HP-UX_B.11.31_IA64N/amsg-320-V61/func/admin/lifecycle/lifecycle_4node_hsql/setup/node-log4j.xml</pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>str = "";
str = str + "amx.th.instance.name=" + testExec.parseInState(name.toString()) + line_separator;
str = str + "amx.th.hpa.log.config.file=" + testExec.parseInState(thLogConfig).replace("\\","/") + line_separator;
str = str + "amx.th.hpa.node.log.config.file=" + testExec.parseInState(nodeStdoutLogConfig).replace("\\","/") + line_separator;
str = str + "amx.th.security.keystore.file=" + testExec.parseInState(securityKeystoreFile.toString()).replace("\\","/") + line_separator;
str = str + "amx.th.security.keystore.type=" + testExec.parseInState(securityKeystoreType.toString()) + line_separator;
str = str + "amx.th.security.keystore.password=" + testExec.parseInState(securityKeystorePassword.toString()) + line_separator;
str = str + "amx.th.jmx.secure=false" + line_separator;
str = str + "amx.th.qin.server.url=" + testExec.parseInState(qinServerUrl.toString()) + line_separator;
str = str + "amx.th.qin.groupName=" + testExec.parseInState(qinGroupName.toString()) + line_separator;
str = str + "amx.th.qin.userName=" + testExec.parseInState(qinUserName.toString()) + line_separator;
str = str + "amx.th.qin.pass=" + testExec.parseInState(qinPassword.toString()) + line_separator;
str = str + "amx.th.qin.startupInterval=" + testExec.parseInState(qinStartupInterval.toString()) + line_separator;
str = str + "amx.th.qin.backoffInterval=" + testExec.parseInState(qinBackoffInterval.toString()) + line_separator;
str = str + "amx.th.qin.recovery_timer_timeout=" + testExec.parseInState(qinRecoveryTimerTimeout.toString()) + line_separator;
str = str + "amx.th.qin.recovery_attempt_delay=" + testExec.parseInState(qinRecoveryAttemptDelay.toString()) + line_separator;
str = str + "amx.th.qin.secure=" + testExec.parseInState(qinSecure.toString()) + line_separator;
str = str + "amx.th.qin.notificationTransport.impl=" + testExec.parseInState(qinTransportImplementation.toString()) + line_separator;
str = str + "amx.th.ems.identity.store.password=" + testExec.parseInState(emsIdentityStorePassword.toString()) + line_separator;
str = str + "amx.th.trinity.keyStoreLocation=" + testExec.parseInState(trinityKeystoreFile.toString()).replace("\\","/") + line_separator;
str = str + "amx.th.trinity.keyStorePassword=" + testExec.parseInState(trinityKeystorePassword.toString()) + line_separator;
str = str + "amx.th.trinity.keyStoreType=" + testExec.parseInState(trinityKeystoreType.toString()) + line_separator;
str = str + "amx.th.trinity.tcs.url=" + testExec.parseInState(trinityTcsUrl.toString()) + line_separator;
str = str + "amx.th.trinity.tcs.user=" + testExec.parseInState(trinityTcsUser.toString()) + line_separator;
str = str + "amx.th.trinity.tcs.password=" + testExec.parseInState(trinityTcsPassword.toString()) + line_separator;
str = str + "amx.th.hpa.jmx.port=" + testExec.parseInState(jmxPort.toString()) + line_separator;
str = str + "amx.th.hpa.jmx.interface=" + testExec.parseInState(jmxInterface.toString()) + line_separator;
str = str + "amx.th.process.prefix=" + testExec.parseInState(processPrefix.toString()) + line_separator;
str = str + "amf.node.type=" + testExec.parseInState(nodeType.toString()) + line_separator;
str = str + "amf.node.type.version=" + testExec.parseInState(nodeTypeVersion.toString()) + line_separator;

return str;
</pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODERESPONSE</td><td>bootstrapTIBCOHost-buildPropFileContent</td><td><pre>amx.th.instance.name=QA-BAT-Host
amx.th.hpa.log.config.file=/groupfiler/tests/tests/amsg/3.0/reports/HP-UX_B.11.31_IA64N/amsg-320-V61/func/admin/lifecycle/lifecycle_4node_hsql/setup/hpa-log4j.xml
amx.th.hpa.node.log.config.file=/groupfiler/tests/tests/amsg/3.0/reports/HP-UX_B.11.31_IA64N/amsg-320-V61/func/admin/lifecycle/lifecycle_4node_hsql/setup/node-log4j.xml
amx.th.security.keystore.file=/local/amx320-V61/tibcohost/3.2/templates/admin.default.ssl.trust.store.ts
amx.th.security.keystore.type=JCEKS
amx.th.security.keystore.password=#!llDFtm1IZoO9hFkLI83SMqigDHIE/V/n
amx.th.jmx.secure=false
amx.th.qin.server.url=tcp://AMX-BACKEND-4.na.tibco.com:7222
amx.th.qin.groupName=AMXAdmin_hpita17
amx.th.qin.userName=admin
amx.th.qin.pass=admin
amx.th.qin.startupInterval=3000
amx.th.qin.backoffInterval=0
amx.th.qin.recovery_timer_timeout=3000
amx.th.qin.recovery_attempt_delay=2000
amx.th.qin.secure=false
amx.th.qin.notificationTransport.impl=com.tibco.amf.hpa.core.runtime.management.impl.NotificationTransportImpl
amx.th.ems.identity.store.password=#!zIi9ux3C1uDzIZBJ2SjuWEKPpz4VMVLf3IEiSxdROOU=
amx.th.trinity.keyStoreLocation=/groupfiler/tests/tests/amsg/3.0/tests/func/runtime/bat/keystore/admin-emsconfig-tct.jks
amx.th.trinity.keyStorePassword=#!QInks0TXAJ7T8L2J1EyCwFrrp7lQ4aIYLyACrTmBLco=
amx.th.trinity.keyStoreType=JKS
amx.th.trinity.tcs.url=service:jmx:jmxmp://0.0.0.0:6041
amx.th.trinity.tcs.user=user1
amx.th.trinity.tcs.password=#!ebhOf5DT0a3G6g+x0McNKKslL/+xDZMULrekrfN1Zio=
amx.th.hpa.jmx.port=6051
amx.th.hpa.jmx.interface=hpita17
amx.th.process.prefix=tibamx_
amf.node.type=com.tibco.amf.hpa.tibcohost.node.hibernate.feature
amf.node.type.version=1.0.1
</pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-writePropFile</td><td><pre></pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-writePropFile</td><td><pre></pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>/groupfiler/tests/tests/amsg/3.0/libraries/common/com/tibco/lisa/file/WriteFile.tst</pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-writePropFile-Log</td><td><pre></pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-writePropFile-Log</td><td><pre></pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODEMSG</td><td>bootstrapTIBCOHost-writePropFile-Log</td><td><pre>Writing in file "/groupfiler/tests/tests/amsg/3.0/reports/HP-UX_B.11.31_IA64N/amsg-320-V61/func/admin/lifecycle/lifecycle_4node_hsql/setup/tibcohost.properties" ...
</pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-writePropFile-checkCreateFile</td><td><pre></pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-writePropFile-checkCreateFile</td><td><pre></pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#CC9933'><td>EVENT_ASSERT</td><td>bootstrapTIBCOHost-writePropFile-checkCreateFile [Assert109] </td><td><pre>createIfNotExist parameter is set to true</pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-writePropFile-checkFileExists</td><td><pre></pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-writePropFile-checkFileExists</td><td><pre></pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>/groupfiler/tests/tests/amsg/3.0/libraries/common/com/tibco/lisa/file/CheckFileExists.tst</pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-writePropFile-checkFileExists-Log</td><td><pre></pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-writePropFile-checkFileExists-Log</td><td><pre></pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODEMSG</td><td>bootstrapTIBCOHost-writePropFile-checkFileExists-Log</td><td><pre>Checking existence of file "/groupfiler/tests/tests/amsg/3.0/reports/HP-UX_B.11.31_IA64N/amsg-320-V61/func/admin/lifecycle/lifecycle_4node_hsql/setup/tibcohost.properties" ...</pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-writePropFile-checkFileExists-checkFileExists</td><td><pre></pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-writePropFile-checkFileExists-checkFileExists</td><td><pre></pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>import java.io.File;

// This function checks for file existence
checkFileExists(String strFile) {
 File f = new File(strFile);
 return f.exists();         
}

// Main 
String baseErrorMsg = "File Check Error"; // Do not modify. Test engineers might assert on this string.
file = testExec.parseInState(file).replace('\\','/');

try {
 return checkFileExists(file);
}
catch(Exception e) {
 return baseErrorMsg + ": " + e.getMessage();
}</pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODERESPONSE</td><td>bootstrapTIBCOHost-writePropFile-checkFileExists-checkFileExists</td><td><pre>false</pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-writePropFile-createFile</td><td><pre></pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-writePropFile-createFile</td><td><pre></pre></td><td>Thu Aug 09 08:13:51 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>/groupfiler/tests/tests/amsg/3.0/libraries/common/com/tibco/lisa/file/CreateFile.tst</pre></td><td>Thu Aug 09 08:13:52 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-writePropFile-createFile-Log</td><td><pre></pre></td><td>Thu Aug 09 08:13:52 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-writePropFile-createFile-Log</td><td><pre></pre></td><td>Thu Aug 09 08:13:52 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODEMSG</td><td>bootstrapTIBCOHost-writePropFile-createFile-Log</td><td><pre>Creating file "/groupfiler/tests/tests/amsg/3.0/reports/HP-UX_B.11.31_IA64N/amsg-320-V61/func/admin/lifecycle/lifecycle_4node_hsql/setup/tibcohost.properties" ...</pre></td><td>Thu Aug 09 08:13:52 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-writePropFile-createFile-createFile</td><td><pre></pre></td><td>Thu Aug 09 08:13:52 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-writePropFile-createFile-createFile</td><td><pre></pre></td><td>Thu Aug 09 08:13:52 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>import java.io.File;

// This function creates a file
createFile(String strFile) {
 File f = new File(strFile);
 
 if(f.exists())
  return true;

 File parent = f.getParentFile();
 if (parent != null) {
  if (!parent.exists()) {
   if (parent.mkdirs()) {
    ;
   }
   else {
    return false;
   }
  }
 }
 return f.createNewFile();           
}

// Main
//String baseSuccessMsg = "File Creation Success"; // Do not modify. Test engineers might assert on this string. 
String baseErrorMsg = "File Creation Error"; // Do not modify. Test engineers might assert on this string.
String file = testExec.getStateString("file", "&lt;&lt;null&gt;&gt;").replace('\\', '/');
file = testExec.parseInState(file).replace('\\', '/');

try {
 if(createFile(file))
  return file;
 else
  return baseErrorMsg;
}
catch(Exception e) {
 return baseErrorMsg + ": " + e.getMessage();
}</pre></td><td>Thu Aug 09 08:13:52 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODERESPONSE</td><td>bootstrapTIBCOHost-writePropFile-createFile-createFile</td><td><pre>/groupfiler/tests/tests/amsg/3.0/reports/HP-UX_B.11.31_IA64N/amsg-320-V61/func/admin/lifecycle/lifecycle_4node_hsql/setup/tibcohost.properties</pre></td><td>Thu Aug 09 08:13:52 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-writePropFile-writeFile</td><td><pre></pre></td><td>Thu Aug 09 08:13:52 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-writePropFile-writeFile</td><td><pre></pre></td><td>Thu Aug 09 08:13:52 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>import java.io.*;

String baseErrorMsg = "File Write Error"; // Do not modify. Test engineers might assert on this string.
String baseSuccessMsg = "File Write Success"; // Do not modify. Test engineers might assert on this string.
String strFile = testExec.parseInState(file).replace('\\', '/');

File fileHandle = new File(strFile);
if (!fileHandle.exists())
  return baseErrorMsg + ": File '" + fileHandle + "' does not exist.";
if (!fileHandle.isFile())
  return baseErrorMsg + ": '" + fileHandle + "' is not a file.";
if (!fileHandle.canWrite())
  return baseErrorMsg + ": Cannot write in file '" + fileHandle + "'.";

if (encoding.equals("")) {
        BufferedWriter output = new BufferedWriter(new OutputStreamWriter
                                 (new FileOutputStream(fileHandle)));
	output.write(content);
	output.close();
	return baseSuccessMsg + ": File '" + fileHandle + "' now contains: \n" + content;
} else {
	BufferedWriter output = new BufferedWriter(new OutputStreamWriter
                                 (new FileOutputStream(fileHandle),encoding));
	output.write(content);
	output.close();
	return baseSuccessMsg + ": File '" + fileHandle + "' now contains: \n" + content;
}</pre></td><td>Thu Aug 09 08:13:52 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODERESPONSE</td><td>bootstrapTIBCOHost-writePropFile-writeFile</td><td><pre>File Write Success: File '/groupfiler/tests/tests/amsg/3.0/reports/HP-UX_B.11.31_IA64N/amsg-320-V61/func/admin/lifecycle/lifecycle_4node_hsql/setup/tibcohost.properties' now contains: 
amx.th.instance.name=QA-BAT-Host
amx.th.hpa.log.config.file=/groupfiler/tests/tests/amsg/3.0/reports/HP-UX_B.11.31_IA64N/amsg-320-V61/func/admin/lifecycle/lifecycle_4node_hsql/setup/hpa-log4j.xml
amx.th.hpa.node.log.config.file=/groupfiler/tests/tests/amsg/3.0/reports/HP-UX_B.11.31_IA64N/amsg-320-V61/func/admin/lifecycle/lifecycle_4node_hsql/setup/node-log4j.xml
amx.th.security.keystore.file=/local/amx320-V61/tibcohost/3.2/templates/admin.default.ssl.trust.store.ts
amx.th.security.keystore.type=JCEKS
amx.th.security.keystore.password=#!llDFtm1IZoO9hFkLI83SMqigDHIE/V/n
amx.th.jmx.secure=false
amx.th.qin.server.url=tcp://AMX-BACKEND-4.na.tibco.com:7222
amx.th.qin.groupName=AMXAdmin_hpita17
amx.th.qin.userName=admin
amx.th.qin.pass=admin
amx.th.qin.startupInterval=3000
amx.th.qin.backoffInterval=0
amx.th.qin.recovery_timer_timeout=3000
amx.th.qin.recovery_attempt_delay=2000
amx.th.qin.secure=false
amx.th.qin.notificationTransport.impl=com.tibco.amf.hpa.core.runtime.management.impl.NotificationTransportImpl
amx.th.ems.identity.store.password=#!zIi9ux3C1uDzIZBJ2SjuWEKPpz4VMVLf3IEiSxdROOU=
amx.th.trinity.keyStoreLocation=/groupfiler/tests/tests/amsg/3.0/tests/func/runtime/bat/keystore/admin-emsconfig-tct.jks
amx.th.trinity.keyStorePassword=#!QInks0TXAJ7T8L2J1EyCwFrrp7lQ4aIYLyACrTmBLco=
amx.th.trinity.keyStoreType=JKS
amx.th.trinity.tcs.url=service:jmx:jmxmp://0.0.0.0:6041
amx.th.trinity.tcs.user=user1
amx.th.trinity.tcs.password=#!ebhOf5DT0a3G6g+x0McNKKslL/+xDZMULrekrfN1Zio=
amx.th.hpa.jmx.port=6051
amx.th.hpa.jmx.interface=hpita17
amx.th.process.prefix=tibamx_
amf.node.type=com.tibco.amf.hpa.tibcohost.node.hibernate.feature
amf.node.type.version=1.0.1
</pre></td><td>Thu Aug 09 08:13:52 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-writePropFile-success</td><td><pre></pre></td><td>Thu Aug 09 08:13:52 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-writePropFile-success</td><td><pre></pre></td><td>Thu Aug 09 08:13:52 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>return testExec.parseInState(file).replace('\\','/');</pre></td><td>Thu Aug 09 08:13:52 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODERESPONSE</td><td>bootstrapTIBCOHost-writePropFile-success</td><td><pre>/groupfiler/tests/tests/amsg/3.0/reports/HP-UX_B.11.31_IA64N/amsg-320-V61/func/admin/lifecycle/lifecycle_4node_hsql/setup/tibcohost.properties</pre></td><td>Thu Aug 09 08:13:52 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-getTHInstanceName</td><td><pre></pre></td><td>Thu Aug 09 08:13:52 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-getTHInstanceName</td><td><pre></pre></td><td>Thu Aug 09 08:13:52 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>/groupfiler/tests/tests/amsg/3.0/libraries/common/com/tibco/lisa/util/GetNameValuePairFromFile.tst</pre></td><td>Thu Aug 09 08:13:52 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-getTHInstanceName-Log</td><td><pre></pre></td><td>Thu Aug 09 08:13:52 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-getTHInstanceName-Log</td><td><pre></pre></td><td>Thu Aug 09 08:13:52 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODEMSG</td><td>bootstrapTIBCOHost-getTHInstanceName-Log</td><td><pre>Looking for amx.th.instance.name in /groupfiler/tests/tests/amsg/3.0/reports/HP-UX_B.11.31_IA64N/amsg-320-V61/func/admin/lifecycle/lifecycle_4node_hsql/setup/tibcohost.properties ...</pre></td><td>Thu Aug 09 08:13:52 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-getTHInstanceName-getNameValuePairFromFile</td><td><pre></pre></td><td>Thu Aug 09 08:13:52 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-getTHInstanceName-getNameValuePairFromFile</td><td><pre></pre></td><td>Thu Aug 09 08:13:52 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>import java.io.File;
import java.io.RandomAccessFile;

getNameValuePairFromFile(String fileName, String name, String assignChar) {
 try {
  File file = new File(fileName);
  String value = "&lt;&lt;null&gt;&gt;";
  
  // Check if file exists
  if(!file.exists())
   return errorMsg + ": File " + fileName + " does not exist";

  // If fileName is a directory, we fail.
  if(file.isDirectory())
   return errorMsg + ": File passed is a directory! It must be a file.";

  // Name cannot be empty
  if(name.equals(""))
   return errorMsg + ": Name cannot be empty";

  // Assignment character cannot be empty
  if(assignChar.equals(""))
   return errorMsg + ": Assign character cannot be empty";

  RandomAccessFile raf = new RandomAccessFile(file, "r");
  String lineData = "";

  // Read file line by line
  while((lineData = raf.readLine()) != null) {
   // If we find the Name and it's not commented out
   //if(lineData.indexOf(name + assignchar) &gt;= 0 && !lineData.trim().startsWith("#")) {
   if(lineData.matches(name + ".*" + assignChar + ".*") && !lineData.trim().startsWith("#")) {
    value = lineData.substring(lineData.indexOf(assignChar) + 1).trim();
    break;
   }
  }
  raf.close();
  return value;
 }
 catch(Exception e){
  return errorMsg + ": " + e.getMessage();
 }
}

// Main
final String errorMsg = "Error getting Name-Value pair";
file = testExec.parseInState(file).replace('\\','/');
name = testExec.parseInState(name);
assignChar = testExec.parseInState(assignChar);
return getNameValuePairFromFile(file, name, assignChar);
 </pre></td><td>Thu Aug 09 08:13:52 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODERESPONSE</td><td>bootstrapTIBCOHost-getTHInstanceName-getNameValuePairFromFile</td><td><pre>QA-BAT-Host</pre></td><td>Thu Aug 09 08:13:53 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-bootstrapTIBCOHost</td><td><pre></pre></td><td>Thu Aug 09 08:13:53 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-bootstrapTIBCOHost</td><td><pre></pre></td><td>Thu Aug 09 08:13:53 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>/groupfiler/tests/tests/amsg/3.0/libraries/common/com/tibco/lisa/util/InvokeAnt.tst</pre></td><td>Thu Aug 09 08:13:53 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-bootstrapTIBCOHost-log</td><td><pre></pre></td><td>Thu Aug 09 08:13:53 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-bootstrapTIBCOHost-log</td><td><pre></pre></td><td>Thu Aug 09 08:13:53 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODEMSG</td><td>bootstrapTIBCOHost-bootstrapTIBCOHost-log</td><td><pre>Invoking ant with following variables:
buildFileName=/groupfiler/tests/tests/amsg/3.0/libraries/amx/com/tibco/tibcohost/BootstrapTibcoHost.xml
logFileName=/groupfiler/tests/tests/amsg/3.0/reports/HP-UX_B.11.31_IA64N/amsg-320-V61/func/admin/lifecycle/lifecycle_4node_hsql/setup/antBootstrapTibcohost.log
propertyFileName=
propertyList=amx.th.instance.name=QA-BAT-Host,tibcohost.properties.file=/groupfiler/tests/tests/amsg/3.0/reports/HP-UX_B.11.31_IA64N/amsg-320-V61/func/admin/lifecycle/lifecycle_4node_hsql/setup/tibcohost.properties,tibco.config.mgmt.home=/local/amx320-V61/conf,TIBCO_HOST_HOME=/local/amx320-V61/tibcohost/3.2
targetName=start-th
projectBaseDirName=/local/amx320-V61/tibcohost/3.2/scripts
antOpts=-Djava.classes.dir=//local/amx320-V61/tibcojre64/1.6.0/jre/lib
additionalAntCmdLineArgs=
waitforCompletion=false</pre></td><td>Thu Aug 09 08:13:53 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-bootstrapTIBCOHost-verifyAntInClasspath</td><td><pre>This step verifies the input variables for the invokeAnt subprocess.</pre></td><td>Thu Aug 09 08:13:53 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-bootstrapTIBCOHost-verifyAntInClasspath</td><td><pre>This step verifies the input variables for the invokeAnt subprocess.</pre></td><td>Thu Aug 09 08:13:53 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>import java.net.URL;
import java.lang.ClassLoader;
import java.net.URLClassLoader;
/*	
String verifyAntInClasspath1() {
		String response = "Fail: ant is not found in classpath.";
		try {
			ClassLoader classLoader = ClassLoader.getSystemClassLoader();
			URL url = classLoader.getResource("org/apache/tools/ant/Project.class"); 
			if (url == null) {
				return response+" null url";
			}			
		} catch(Exception e) {			  
				return response+" Exception is: "+e.getMessage();
		}
		response ="pass: ant is found in classpath.";
		return response;
	}

	

	String verifyAntInClasspath3() {
		String response = "Fail: ant is not found in classpath.";
		try {
			ClassLoader classLoader = com.itko.util.cpdlg.JavaUtils.getClassLoader();
			URL[] urls = ((URLClassLoader)classLoader).getURLs();
			
			for(int i = 0; i &lt; urls.length; i++) {
				response="\n"+urls[i].getPath();
			}
					
		} catch(Exception e) {			  
				return response;
		}
		// response ="pass: ant is found in classpath.";
		return response;
	}

	String verifyAntInClasspath4() {
		String response = "Fail: ant is not found in classpath.";
		try {
			String[] rl = com.itko.util.cpdlg.JavaUtils.getClasspath();
			for(int i = 0; i &lt; rl.length; i++) {
				response=response+"\n"+rl[i];
			}		
		} catch(Exception e) {			  
				return response;
		}
		// response ="pass: ant is found in classpath.";
		return response;
	}


	String verifyAntInClasspath2() {
		String response = "Fail: ant is not found in classpath.";
		try {
			ClassLoader classLoader = com.itko.lisa.test.Environment.getClassLoader();
			URL url = classLoader.getResource("org/apache/tools/ant/Project.class"); 
			if (url == null) {
				return response;
			}			
		} catch(Exception e) {			  
				return response+" Exception is: "+e.getMessage();
		}
		response ="Pass: ant is found in classpath.";
		return response;
	}

	static String verifyAntInClasspath() {
		String response = "Fail: ant is not found in classpath.";
		try {
			com.itko.lisa.test.TestExec.class.forName("org.apache.tools.ant.Project");	
		}catch(Exception e) {
			return response+e.getMessage();
		}
		response ="pass: ant is found in classpath.";
		return response;
	
	}

*/

	String verifyAntInClasspath() {
		String response = "Fail: ant is not found in classpath.";
		try {
			// com.itko.util.cpdlg.JavaUtils.getClassLoader();
			ClassLoader classLoader = com.itko.lisa.test.Environment.getClassLoader();
			URL url = classLoader.getResource("org/apache/tools/ant/Project.class"); 
			if (url == null) {
				return response;
			}			
		} catch(Exception e) {			  
				return response;
		}
		response ="Pass: ant is found in classpath.";
		return response;
	}
	

return verifyAntInClasspath();</pre></td><td>Thu Aug 09 08:13:53 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODERESPONSE</td><td>bootstrapTIBCOHost-bootstrapTIBCOHost-verifyAntInClasspath</td><td><pre>Pass: ant is found in classpath.</pre></td><td>Thu Aug 09 08:13:54 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-bootstrapTIBCOHost-verifyAntVersion</td><td><pre>This step verifies the input variables for the invokeAnt subprocess.</pre></td><td>Thu Aug 09 08:13:54 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-bootstrapTIBCOHost-verifyAntVersion</td><td><pre>This step verifies the input variables for the invokeAnt subprocess.</pre></td><td>Thu Aug 09 08:13:54 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.FileReader;
import java.io.InputStream;
import java.io.OutputStream;
import java.io.PrintStream;
import java.util.Enumeration;
import java.util.Properties;
import java.util.Set;


String verifyAnt() {
		String response = "Fail:";
		String version = null;
		try {
			version = org.apache.tools.ant.Main.getAntVersion();
			// version = "Apache Ant version 1.7.1 compiled on June 27";
		}catch(Exception e) {
			if ( e instanceof ClassNotFoundException) {
				response = response+" Did not find ant in classpath!";
				return response;
			}
			response = response+" Could not get the version of ant";
			return response;
		}
		
		String [] versionArray = version.split(" ");
		if (versionArray.length != 9) {
			try {
				Properties props = new Properties();
				  InputStream in = org.apache.tools.ant.Main.class.getResourceAsStream("/org/apache/tools/ant/version.txt");
				  props.load(in);
				  in.close();
				  version = props.getProperty("VERSION");
			}catch(Exception e) {
				response = response+" Could not verify the version of ant. the version returned is: "+version;
				return response;
			}			
			
		}else {
			version = versionArray[3];
		}
		
		versionArray = version.split("\\.");
		if (versionArray.length != 3) {
			response = response+" Could not verify the version of ant. the version returned is: "+version;
			// response = response+"\n"+" Expected version format is: x.y.z";
			return response;
		}
		
		version = versionArray[0]+"."+versionArray[1];
		
		if (Double.parseDouble(version) &lt; 1.7) {
			response = response+"The version of ant should be at least 1.7.x. Current Version is: "+versionArray[0]+"."+versionArray[1];
			return response;
		}
		response = "Pass: ant verified successfully.";
		return response;
	}

return verifyAnt();</pre></td><td>Thu Aug 09 08:13:54 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODERESPONSE</td><td>bootstrapTIBCOHost-bootstrapTIBCOHost-verifyAntVersion</td><td><pre>Pass: ant verified successfully.</pre></td><td>Thu Aug 09 08:13:56 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-bootstrapTIBCOHost-verifyInputVariables</td><td><pre>This step verifies the input variables for the invokeAnt subprocess.</pre></td><td>Thu Aug 09 08:13:56 PDT 2012</td> </tr><tr bgcolor='#87CEEB'><td>EVENT_TRANSACTION</td><td>bootstrapTIBCOHost-bootstrapTIBCOHost-verifyInputVariables</td><td><pre>This step verifies the input variables for the invokeAnt subprocess.</pre></td><td>Thu Aug 09 08:13:56 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_REQUEST</td><td></td><td><pre>import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.FileReader;
import java.io.InputStream;
import java.io.OutputStream;
import java.io.PrintStream;
import java.util.Enumeration;
import java.util.Properties;
import java.util.Set;

String checkInputVariables() {
		String response = "Fail:";
		try {
			if ((buildFileName == null) || (buildFileName.equals("")) ) {
				throw new Exception("buildFileName cannot be null.");
			}
           
			File buildFile = new File(testExec.parseInState(buildFileName).replace('\\', '/'));
			if (!buildFile.canRead()) {
				throw new Exception("Build file not found/cannot read it. "+buildFileName);
			}
			if (!buildFile.isFile()) {				
				throw new Exception("build file is not a normal file. "+buildFileName);
			}
						
			File propertyFile = null;
			if ((propertyFileName != null) && (!propertyFileName.equals(""))) {
				propertyFile = new File(testExec.parseInState(propertyFileName).replace('\\', '/'));
				if (!propertyFile.canRead()) {
					throw new Exception("Property file not found/cannot read it. "+propertyFileName);
				}
				if (!propertyFile.isFile()) {
					throw new Exception("property file is not a normal file. "+propertyFileName);
				}
				
			}

			File projectBaseDir = null;
			if ((projectBaseDirName != null) && (!projectBaseDirName.equals(""))) {
				projectBaseDir = new File(testExec.parseInState(projectBaseDirName).replace('\\', '/'));
				if((!projectBaseDir.exists()) || (!projectBaseDir.isDirectory())) {
					throw new Exception("The project base directory is not valid. "+projectBaseDirName);
				}
			}

            // Let's also verify if TIBCO_JAVA_HOME exists since we use that to launch Ant
            File javaHome = new File(testExec.parseInState(TIBCO_JAVA_HOME).replace('\\', '/'));
            if (!javaHome.exists()) {
                throw new Exception("Java home directory is not valid: " + TIBCO_JAVA_HOME);
            }

			response = "Pass: Input variables are valid.";

		}catch(Exception e) {
			response = "Fail: "+e.getLocalizedMessage();
		}
		return response;
	}

return checkInputVariables();</pre></td><td>Thu Aug 09 08:13:56 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_NODERESPONSE</td><td>bootstrapTIBCOHost-bootstrapTIBCOHost-verifyInputVariables</td><td><pre>Fail: The project base directory is not valid. /local/amx320-V61/tibcohost/3.2/scripts</pre></td><td>Thu Aug 09 08:13:56 PDT 2012</td> </tr><tr bgcolor='#CC9933'><td>EVENT_ASSERT</td><td>bootstrapTIBCOHost-bootstrapTIBCOHost-verifyInputVariables [Assert147] </td><td><pre>Input parameters incorrect
Expression, Fail:.*
was found in the result, Fail: The project base directory is not valid. /local/amx320-V61/tibcohost/3.2/scripts</pre></td><td>Thu Aug 09 08:13:56 PDT 2012</td> </tr><tr bgcolor='#FFA500'><td>EVENT_TRANSFAILED</td><td>bootstrapTIBCOHost-bootstrapTIBCOHost</td><td><pre>Sub test case had failure</pre></td><td>Thu Aug 09 08:13:56 PDT 2012</td> </tr><tr bgcolor='#FFA500'><td>EVENT_TRANSFAILED</td><td>bootstrapTIBCOHost</td><td><pre>Sub test case had failure</pre></td><td>Thu Aug 09 08:13:56 PDT 2012</td> </tr><tr bgcolor='red'><td>EVENT_TESTFAILED</td><td></td><td></td><td>Thu Aug 09 08:13:56 PDT 2012</td> </tr><tr bgcolor='#CCCC99'><td>EVENT_TESTEND</td><td></td><td></td><td>Thu Aug 09 08:13:56 PDT 2012</td> </tr></table></body></html>