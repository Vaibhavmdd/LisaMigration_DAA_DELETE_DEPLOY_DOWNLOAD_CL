<project default="deploy.app">
	<import file="${TIBCO_AMX_LIBRARY}/bin/amx-macrodefs.xml" />
	
	<target name="createRT">
		<create.rt dataFile="${amxConfigFile}" objectSelector="ResourceTemplate | JNDIConnectionConfigurationResourceTemplate | JNDIConnectionFactoryResourceTemplate | JNDIDestinationResourceTemplate" />
	</target>
	
	
        <target name="createAppender">
		<create.log.appender dataFile="${amxConfigFile}"/>
	</target>
	
	<target name="deploy.app">
	  
	        <setup.ri dataFile="${amxConfigFile}" />
	        <upload.daa dataFile="${amxConfigFile}" force="true" />
		<create.app dataFile="${amxConfigFile}" />
		<map.component.to.node dataFile="${amxConfigFile}" />
		<map.service.binding.to.node dataFile="${amxConfigFile}" />
		<deploy.app dataFile="${amxConfigFile}" timeout="${timeout}" />
	</target>
	
        <target name="deploy.logging">

		<set.logger.to.node dataFile="${amxConfigFile}" />
		<deploy.action objector="Environment/Node" description="Apply Application Logger" dataFile="${amxConfigFile}" />
	</target>
	
	<target name="undeploy.app">
                <undeploy.app dataFile="${amxConfigFile}" timeout="${timeout}" />
		<delete.app dataFile="${amxConfigFile}" />
		<uninstall.ri dataFile="${amxConfigFile}" />
		<delete.ri dataFile="${amxConfigFile}" />
	    <delete.rt dataFile="${amxConfigFile}" objectSelector="ResourceTemplate | JNDIConnectionConfigurationResourceTemplate | JNDIConnectionFactoryResourceTemplate | JNDIDestinationResourceTemplate"/>
	        
	</target>

	<target name="addappendertoLogger">
    <AMXAdminTask
        remote="true"
        propsFile="${basedir}/remote_props.properties"
        action="add"
        dataFile="${amxConfigFile}"
        objectSelector="Environment//Node/Logger[@name='root']"/>
   </target>
  
  	<target name="deleteAppender">
    <AMXAdminTask
        remote="true"
        propsFile="${basedir}/remote_props.properties"
        action="delete"
        dataFile="${amxConfigFile}"
        objectSelector="Environment//Node/Logger[@name='root']"/>
	   <delete.log.appender objectSelector="LogAppender[@name='qaCBEFileLogAppender0114']" dataFile="${amxConfigFile}" />
	 </target>


</project>