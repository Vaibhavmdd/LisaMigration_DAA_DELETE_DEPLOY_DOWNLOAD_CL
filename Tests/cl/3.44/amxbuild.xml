<project default="setup.app">
    <import file="${TIBCO_AMXADMIN_HOME}/bin/taskdef.xml" />
	<import file="${TIBCO_AMX_LIBRARY}/bin/amx-macrodefs.xml" />

	<target name="setup.app">
		<upload.daa  dataFile="${amxConfigFile}"/>
		<create.app dataFile="${amxConfigFile}"/>
		<map.component.to.node dataFile="${amxConfigFile}" /> 
		<create.rt dataFile="${amxConfigFile}" objectSelector="ResourceTemplate | Environment/ResourceTemplate | Environment/Application/ResourceTemplate | JNDIConnectionConfigurationResourceTemplate | JNDIConnectionFactoryResourceTemplate | JNDIDestinationResourceTemplate" />
        <create.ri dataFile="${amxConfigFile}"  objectSelector="JNDIConnectionConfigurationResourceTemplate | JNDIConnectionFactoryResourceTemplate | JNDIDestinationResourceTemplate"/>
		<install.ri dataFile="${amxConfigFile}" objectSelector="JNDIConnectionConfigurationResourceTemplate | JNDIConnectionFactoryResourceTemplate | JNDIDestinationResourceTemplate" />
		<deploy.app dataFile="${amxConfigFile}" />	
	</target>
	
	<target name="conf.logging">
		<create.log.appender dataFile="${amxConfigFile}" />
		<set.logger.to.node dataFile="${amxConfigFile}" />
		<deploy.action objector="Environment/Node" description="Apply Node Logging Configuration" dataFile="${amxConfigFile}" />
	</target>

	<target name="undeploy.app">
		<undeploy.app dataFile="${amxConfigFile}" appName="CL-2702" failOnError="false" />
		<delete.app dataFile="${amxConfigFile}" appName="CL-2702" failOnError="false" />
		<set.logger.to.node dataFile="${amxConfigFile}" action="delete" />
		<deploy.action objector="Environment/Node" description="Apply Node Logging Configuration" dataFile="${amxConfigFile}" />
		<delete.log.appender dataFile="${amxConfigFile}" />
		<delete.rt dataFile="${amxConfigFile}" objectSelector="ResourceTemplate | JNDIConnectionConfigurationResourceTemplate | JNDIConnectionFactoryResourceTemplate | JNDIDestinationResourceTemplate" />
	</target>
	

		
</project>