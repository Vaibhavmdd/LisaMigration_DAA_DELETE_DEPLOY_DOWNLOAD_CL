<project default="deploy.app">
	<import file="${TIBCO_AMX_LIBRARY}/bin/amx-macrodefs.xml" />

	<target name="deploy.app">
		<upload.daa dataFile="${amxConfigFile}" />
		<create.app dataFile="${amxConfigFile}" />
		<map.component.to.node dataFile="${amxConfigFile}" />
		<map.service.binding.to.node dataFile="${amxConfigFile}" />
		<deploy.app dataFile="${amxConfigFile}" timeout="${timeout}" />	
	</target>
	
	<target name="undeploy.app">
		<undeploy.app dataFile="${amxConfigFile}" timeout="${timeout}" />
	</target>
	
	<target name="conf.logging">
		<create.log.appender dataFile="${amxConfigFile}" />
		<set.logger.to.app dataFile="${amxConfigFile}" />
		<deploy.action objector="Environment/Application" description="Apply Application Logger" dataFile="${amxConfigFile}" />
		<set.action objector="Environment/Application/Component[1]/Logger" description="Set Java Logger" dataFile="${amxConfigFile}" />
		<deploy.action objector="Environment/Application/Component[1]" description="Apply Java Logger" dataFile="${amxConfigFile}" />
	</target>
	

	<target name="ImportAndRegenerateDAA">
		<echo message="Importing Projects"></echo>
		<sds.importProject projectLoc="${soa.project.loc}" overwrite="true" />		
		<sds.importProject projectLoc="${java.project.loc}" overwrite="true"/>			
		<sds.importProject projectLoc="${spring.project.loc}" overwrite="true"/>
		<echo message="Create DAA"></echo>
		<sds.createDAA projectname="${projectName}"	daaloc="Deployment Artifacts/${daa}" overwriteexistingdaa="true">
			<application compositename="${compositeName}" projectname="${projectName}">  
			</application>			
			<feature id="${featureid}" />				
		</sds.createDAA>			
	</target>

</project>