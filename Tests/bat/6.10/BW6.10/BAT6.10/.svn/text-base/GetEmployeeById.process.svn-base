<?xml version="1.0" encoding="UTF-8"?>
<pd:ProcessDefinition xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ns1="http://www.tibco.com/pe/DeployedVarsType" xmlns:tib="http://www.tibco.com/bw/xslt/custom-functions" xmlns:pfx="http://www.tibco.com/pe/GenerateErrorActivity/InputSchema" xmlns:ns="http://www.tibco.com/xmlns/ae2xsd/2002/05/BAT6.10" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ns2="http://www.tibco.com/pe/SignalInActivitySchema" xmlns:pd="http://xmlns.tibco.com/bw/process/2003">
    <pd:name>BAT6.10/GetEmployeeById.process</pd:name>
    <pd:startName>Adapter Request-Response Server</pd:startName>
    <pd:startX>0</pd:startX>
    <pd:startY>0</pd:startY>
    <pd:returnBindings/>
    <pd:starter name="Adapter Request-Response Server">
        <pd:type>com.tibco.plugin.ae.AERPCServerActivity</pd:type>
        <pd:resourceType>ae.aepalette.aeRRServer</pd:resourceType>
        <pd:x>62</pd:x>
        <pd:y>189</pd:y>
        <config>
            <ae.aepalette.sharedProperties.transportChoice>default</ae.aepalette.sharedProperties.transportChoice>
            <ae.aepalette.sharedProperties.useRequestReply>false</ae.aepalette.sharedProperties.useRequestReply>
            <ae.aepalette.sharedProperties.adapterService>/BAT6_10.adapter#adapterService.BAT6.10Invoke</ae.aepalette.sharedProperties.adapterService>
            <tpPluginEndpointName>BAT6.10InvokeEndPoint</tpPluginEndpointName>
            <ae.aepalette.sharedProperties.transportType>jmsQueue</ae.aepalette.sharedProperties.transportType>
            <ae.aepalette.sharedProperties.jmsQueueSessionQueue>BAT6_10_Queue</ae.aepalette.sharedProperties.jmsQueueSessionQueue>
            <ae.aepalette.sharedProperties.jmsQueueSessionConnectionFactory>QueueConnectionFactory</ae.aepalette.sharedProperties.jmsQueueSessionConnectionFactory>
            <ae.aepalette.sharedProperties.jmsSessionUsername>admin</ae.aepalette.sharedProperties.jmsSessionUsername>
            <ae.aepalette.sharedProperties.jmsSessionProviderURL>%%BAT6_10/jmsProviderUrl%%</ae.aepalette.sharedProperties.jmsSessionProviderURL>
            <ae.aepalette.aeOpClientReqActivity.ops>GetEmployeeById</ae.aepalette.aeOpClientReqActivity.ops>
            <ae.aepalette.sharedProperties.outputMeta>
                <aeMeta>/AESchemas/BAT6.10.aeschema#rpcClass.Operation</aeMeta>
            </ae.aepalette.sharedProperties.outputMeta>
            <ae.aepalette.sharedProperties.isAutoConfirm>true</ae.aepalette.sharedProperties.isAutoConfirm>
            <ae.aepalette.sharedProperties.autoGenClientID>true</ae.aepalette.sharedProperties.autoGenClientID>
            <ae.aepalette.sharedProperties.jmsSessionJNDILookups>true</ae.aepalette.sharedProperties.jmsSessionJNDILookups>
        </config>
        <pd:inputBindings/>
    </pd:starter>
    <pd:endName>End</pd:endName>
    <pd:endX>766</pd:endX>
    <pd:endY>175</pd:endY>
    <pd:errorSchemas/>
    <pd:processVariables/>
    <pd:targetNamespace>http://xmlns.example.com/1298277179329</pd:targetNamespace>
    <pd:activity name="Send Declared Exception to AdapterBT Request">
        <pd:type>com.tibco.plugin.ae.AERPCServerFaultActivity</pd:type>
        <pd:resourceType>ae.aepalette.aeOpServerFaultActivity</pd:resourceType>
        <pd:x>407</pd:x>
        <pd:y>264</pd:y>
        <config>
            <ae.aepalette.sharedProperties.transportChoice>default</ae.aepalette.sharedProperties.transportChoice>
            <ae.aepalette.sharedProperties.useRequestReply>false</ae.aepalette.sharedProperties.useRequestReply>
            <ae.aepalette.aeOpServerReplyActivity.endpoint>Adapter Request-Response Server</ae.aepalette.aeOpServerReplyActivity.endpoint>
            <ae.aepalette.aeOpClientReqActivity.ops>GetEmployeeNameById</ae.aepalette.aeOpClientReqActivity.ops>
            <ae.aepalette.sharedProperties.outputMeta>/AESchemas/BAT6.10.aeschema#rpcClass.Operation</ae.aepalette.sharedProperties.outputMeta>
        </config>
        <pd:inputBindings>
            <ProcessStarterFaultReply>
                <ns:__caret_fault_caret_Operation_caret_GetEmployeeById>
                    <EmployeeIdNotFound>
                        <xsl:value-of select="concat($_globalVariables/ns1:GlobalVariables/BAT6_10/str2,$Adapter-Request-Response-Server/ProcessStarterOutput/ns:__caret_request_caret_Operation_caret_GetEmployeeById/Id, &quot; does not exist.&quot;)"/>
                    </EmployeeIdNotFound>
                </ns:__caret_fault_caret_Operation_caret_GetEmployeeById>
            </ProcessStarterFaultReply>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="Respond to AdapterBT Request 2">
        <pd:type>com.tibco.plugin.ae.AERPCServerReplyActivity</pd:type>
        <pd:resourceType>ae.aepalette.aeOpServerReplyActivity</pd:resourceType>
        <pd:x>216</pd:x>
        <pd:y>353</pd:y>
        <config>
            <ae.aepalette.sharedProperties.transportChoice>default</ae.aepalette.sharedProperties.transportChoice>
            <ae.aepalette.sharedProperties.useRequestReply>false</ae.aepalette.sharedProperties.useRequestReply>
            <ae.aepalette.aeOpServerReplyActivity.endpoint>Adapter Request-Response Server</ae.aepalette.aeOpServerReplyActivity.endpoint>
            <ae.aepalette.aeOpClientReqActivity.ops>GetEmployeeById</ae.aepalette.aeOpClientReqActivity.ops>
            <ae.aepalette.sharedProperties.outputMeta>/AESchemas/BAT6.10.aeschema#rpcClass.Operation</ae.aepalette.sharedProperties.outputMeta>
        </config>
        <pd:inputBindings>
            <ProcessStarterReply>
                <ns:__caret_reply_caret_Operation_caret_GetEmployeeById>
                    <__caret_returnValue_caret_/>
                    <Employee>
                        <Name>
                            <xsl:value-of select="$_globalVariables/ns1:GlobalVariables/BAT6_10/str1"/>
                        </Name>
                        <xsl:if test="$Adapter-Request-Response-Server/ProcessStarterOutput/ns:__caret_request_caret_Operation_caret_GetEmployeeById/Id">
                            <Id>
                                <xsl:copy-of select="$Adapter-Request-Response-Server/ProcessStarterOutput/ns:__caret_request_caret_Operation_caret_GetEmployeeById/Id/@xsi:nil"/>
                                <xsl:value-of select="$Adapter-Request-Response-Server/ProcessStarterOutput/ns:__caret_request_caret_Operation_caret_GetEmployeeById/Id"/>
                            </Id>
                        </xsl:if>
                        <HiringDate>
                            <xsl:value-of select="tib:create-date(2001, 08, 13)"/>
                        </HiringDate>
                    </Employee>
                </ns:__caret_reply_caret_Operation_caret_GetEmployeeById>
            </ProcessStarterReply>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="Wait for AdapterBT Request">
        <pd:type>com.tibco.plugin.ae.AERPCServerSignalInActivity</pd:type>
        <pd:resourceType>ae.aepalette.aeServerSignalInActivity</pd:resourceType>
        <pd:x>541</pd:x>
        <pd:y>349</pd:y>
        <config>
            <_eventTimeout>60000</_eventTimeout>
            <ae.aepalette.sharedProperties.transportChoice>default</ae.aepalette.sharedProperties.transportChoice>
            <ae.aepalette.sharedProperties.useRequestReply>false</ae.aepalette.sharedProperties.useRequestReply>
            <ae.aepalette.sharedProperties.adapterService>/BAT6_10.adapter#adapterService.BAT6.10Invoke</ae.aepalette.sharedProperties.adapterService>
            <tpPluginEndpointName>BAT6.10InvokeEndPoint</tpPluginEndpointName>
            <ae.aepalette.sharedProperties.transportType>jmsQueue</ae.aepalette.sharedProperties.transportType>
            <ae.aepalette.sharedProperties.jmsQueueSessionQueue>BAT6_10_Queue</ae.aepalette.sharedProperties.jmsQueueSessionQueue>
            <ae.aepalette.sharedProperties.jmsQueueSessionConnectionFactory>QueueConnectionFactory</ae.aepalette.sharedProperties.jmsQueueSessionConnectionFactory>
            <ae.aepalette.sharedProperties.jmsSessionUsername>admin</ae.aepalette.sharedProperties.jmsSessionUsername>
            <ae.aepalette.sharedProperties.jmsSessionProviderURL>%%BAT6_10/jmsProviderUrl%%</ae.aepalette.sharedProperties.jmsSessionProviderURL>
            <ae.aepalette.aeOpClientReqActivity.ops>GetEmployeeByIdWithWrongData</ae.aepalette.aeOpClientReqActivity.ops>
            <ae.aepalette.sharedProperties.isAutoConfirm>true</ae.aepalette.sharedProperties.isAutoConfirm>
            <ae.aepalette.sharedProperties.autoGenClientID>true</ae.aepalette.sharedProperties.autoGenClientID>
            <ae.aepalette.sharedProperties.outputMeta>
                <aeMeta>/AESchemas/BAT6.10.aeschema#rpcClass.Operation</aeMeta>
            </ae.aepalette.sharedProperties.outputMeta>
        </config>
        <pd:inputBindings>
            <ns2:input/>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="Respond to AdapterBT Request 3">
        <pd:type>com.tibco.plugin.ae.AERPCServerReplyActivity</pd:type>
        <pd:resourceType>ae.aepalette.aeOpServerReplyActivity</pd:resourceType>
        <pd:x>747</pd:x>
        <pd:y>301</pd:y>
        <config>
            <ae.aepalette.sharedProperties.transportChoice>default</ae.aepalette.sharedProperties.transportChoice>
            <ae.aepalette.sharedProperties.useRequestReply>false</ae.aepalette.sharedProperties.useRequestReply>
            <ae.aepalette.aeOpServerReplyActivity.endpoint>Wait for AdapterBT Request</ae.aepalette.aeOpServerReplyActivity.endpoint>
            <ae.aepalette.aeOpClientReqActivity.ops>GetEmployeeById</ae.aepalette.aeOpClientReqActivity.ops>
            <ae.aepalette.sharedProperties.outputMeta>/AESchemas/BAT6.10.aeschema#rpcClass.Operation</ae.aepalette.sharedProperties.outputMeta>
        </config>
        <pd:inputBindings>
            <ProcessStarterReply>
                <ns:__caret_reply_caret_Operation_caret_GetEmployeeByIdWithWrongData>
                    <Name>
                        <xsl:value-of select="&quot;AMX&quot;"/>
                    </Name>
                </ns:__caret_reply_caret_Operation_caret_GetEmployeeByIdWithWrongData>
            </ProcessStarterReply>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="Respond to AdapterBT Request">
        <pd:type>com.tibco.plugin.ae.AERPCServerReplyActivity</pd:type>
        <pd:resourceType>ae.aepalette.aeOpServerReplyActivity</pd:resourceType>
        <pd:x>420</pd:x>
        <pd:y>43</pd:y>
        <config>
            <ae.aepalette.sharedProperties.transportChoice>default</ae.aepalette.sharedProperties.transportChoice>
            <ae.aepalette.sharedProperties.useRequestReply>false</ae.aepalette.sharedProperties.useRequestReply>
            <ae.aepalette.aeOpServerReplyActivity.endpoint>Adapter Request-Response Server</ae.aepalette.aeOpServerReplyActivity.endpoint>
            <ae.aepalette.aeOpClientReqActivity.ops>GetEmployeeById</ae.aepalette.aeOpClientReqActivity.ops>
            <ae.aepalette.sharedProperties.outputMeta>/AESchemas/BAT6.10.aeschema#rpcClass.Operation</ae.aepalette.sharedProperties.outputMeta>
        </config>
        <pd:inputBindings>
            <ProcessStarterReply>
                <ns:__caret_reply_caret_Operation_caret_GetEmployeeById>
                    <Employee>
                        <Name>
                            <xsl:value-of select="$_globalVariables/ns1:GlobalVariables/BAT6_10/str1"/>
                        </Name>
                        <xsl:if test="$Adapter-Request-Response-Server/ProcessStarterOutput/ns:__caret_request_caret_Operation_caret_GetEmployeeById/Id">
                            <Id>
                                <xsl:copy-of select="$Adapter-Request-Response-Server/ProcessStarterOutput/ns:__caret_request_caret_Operation_caret_GetEmployeeById/Id/@xsi:nil"/>
                                <xsl:value-of select="$Adapter-Request-Response-Server/ProcessStarterOutput/ns:__caret_request_caret_Operation_caret_GetEmployeeById/Id"/>
                            </Id>
                        </xsl:if>
                        <HiringDate>
                            <xsl:value-of select="tib:create-date(2001, 08, 13)"/>
                        </HiringDate>
                    </Employee>
                </ns:__caret_reply_caret_Operation_caret_GetEmployeeById>
            </ProcessStarterReply>
        </pd:inputBindings>
    </pd:activity>
    <pd:transition>
        <pd:from>Send Declared Exception to AdapterBT Request</pd:from>
        <pd:to>End</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Respond to AdapterBT Request 2</pd:from>
        <pd:to>Wait for AdapterBT Request</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Wait for AdapterBT Request</pd:from>
        <pd:to>Respond to AdapterBT Request 3</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Respond to AdapterBT Request 3</pd:from>
        <pd:to>End</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Wait for AdapterBT Request</pd:from>
        <pd:to>End</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>error</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Respond to AdapterBT Request</pd:from>
        <pd:to>End</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Adapter Request-Response Server</pd:from>
        <pd:to>Send Declared Exception to AdapterBT Request</pd:to>
        <pd:xpathDescription>ID=34</pd:xpathDescription>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>xpath</pd:conditionType>
        <pd:xpath>$Adapter-Request-Response-Server/ProcessStarterOutput/ns:__caret_request_caret_Operation_caret_GetEmployeeById/Id = 34</pd:xpath>
    </pd:transition>
    <pd:transition>
        <pd:from>Adapter Request-Response Server</pd:from>
        <pd:to>Respond to AdapterBT Request 2</pd:to>
        <pd:xpathDescription>ID=56</pd:xpathDescription>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>xpath</pd:conditionType>
        <pd:xpath>$Adapter-Request-Response-Server/ProcessStarterOutput/ns:__caret_request_caret_Operation_caret_GetEmployeeById/Id = 56</pd:xpath>
    </pd:transition>
    <pd:transition>
        <pd:from>Adapter Request-Response Server</pd:from>
        <pd:to>Respond to AdapterBT Request</pd:to>
        <pd:xpathDescription>ID=12</pd:xpathDescription>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>xpath</pd:conditionType>
        <pd:xpath>$Adapter-Request-Response-Server/ProcessStarterOutput/ns:__caret_request_caret_Operation_caret_GetEmployeeById/Id = 12</pd:xpath>
    </pd:transition>
    <pd:transition>
        <pd:from>Adapter Request-Response Server</pd:from>
        <pd:to>End</pd:to>
        <pd:xpathDescription>ID=90</pd:xpathDescription>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>otherwise</pd:conditionType>
    </pd:transition>
    <pd:label>
        <pd:name>Label</pd:name>
        <pd:description>Positive case: 
Return Employee parameters</pd:description>
        <pd:x>551</pd:x>
        <pd:y>31</pd:y>
        <pd:width>189</pd:width>
        <pd:height>49</pd:height>
        <pd:fontName>Arial-bold-10</pd:fontName>
        <pd:fontColor>-16777216</pd:fontColor>
        <pd:color>-1</pd:color>
        <pd:type>solid</pd:type>
        <pd:thickness>0</pd:thickness>
        <pd:fade>true</pd:fade>
    </pd:label>
    <pd:label>
        <pd:name>Label (1)</pd:name>
        <pd:description>Positive case: 
Return Declared Exception</pd:description>
        <pd:x>331</pd:x>
        <pd:y>246</pd:y>
        <pd:width>167</pd:width>
        <pd:height>40</pd:height>
        <pd:fontName>Arial-bold-10</pd:fontName>
        <pd:fontColor>-16777216</pd:fontColor>
        <pd:color>-1</pd:color>
        <pd:type>solid</pd:type>
        <pd:thickness>0</pd:thickness>
        <pd:fade>true</pd:fade>
    </pd:label>
    <pd:label>
        <pd:name>Label (2)</pd:name>
        <pd:description>Negative case: 
Will generate Timeout  in AMX (Adapter BT will timeout)</pd:description>
        <pd:x>446</pd:x>
        <pd:y>148</pd:y>
        <pd:width>285</pd:width>
        <pd:height>54</pd:height>
        <pd:fontName>Arial-bold-10</pd:fontName>
        <pd:fontColor>-16777216</pd:fontColor>
        <pd:color>-1</pd:color>
        <pd:type>solid</pd:type>
        <pd:thickness>0</pd:thickness>
        <pd:fade>true</pd:fade>
    </pd:label>
    <pd:label>
        <pd:name>Label (3)</pd:name>
        <pd:description>Negative case: 
Will generate an Undeclared Exception in AMX 
due to data not matching (string vs. binary)</pd:description>
        <pd:x>765</pd:x>
        <pd:y>369</pd:y>
        <pd:width>241</pd:width>
        <pd:height>56</pd:height>
        <pd:fontName>Arial-bold-10</pd:fontName>
        <pd:fontColor>-16777216</pd:fontColor>
        <pd:color>-1</pd:color>
        <pd:type>solid</pd:type>
        <pd:thickness>0</pd:thickness>
        <pd:fade>true</pd:fade>
    </pd:label>
</pd:ProcessDefinition>