<?xml version="1.0" ?>


<!-- Test Case created by LISA Test Editor -->
<!-- On: Sat Sep 17 11:00:44 PDT 2011 -->


<TestCase name="5.21" version="2">
<id>9b080233</id>
<Documentation>SOAPException with SOAP/JMS&#13;&#10;Comp1:SOAP(JMS)&lt;-&gt;JAVA1&lt;-&gt;JAVA2&lt;-&gt;SOAP(JMS)&#13;&#10;Comp2:SOAP(JMS)&lt;-&gt;JAVA3&#13;&#10;&#13;&#10;1. Java3 throws undeclared. &#13;&#10;Caught by Java2 that throws a SOAPException with custom faultcode/faultrole&#13;&#10;Caught by Java1 that throws SOAPException with new faultcode/faultrole&#13;&#10;2. Same but use SOAPException constructor to have faultcode as string&#13;&#10;3. Java3 throws declared with null details&#13;&#10;Java2 receives it as SOAPException&#13;&#10;Caught by Java1 that throws the same&#13;&#10;4. Java1 throws SOAPException</Documentation>
<sig>ZWQ9MiZ0Y3Y9MiZsaXNhdj00LjYuNyAoNC42LjcuMTYpJm5vZGVzPTkwMjYzODczNg==</sig>
<rootNode>invokeService-Case1</rootNode>
<subprocess>false</subprocess>

<initState>
</initState>

<resultState>
    <Parameter>
    <key>lisa.fail.rsp</key>
    <value>Set in Step fail</value>
    </Parameter>
    <Parameter>
    <key>lisa.fail.rsp.time</key>
    <value>Set in Step fail</value>
    </Parameter>
    <Parameter>
    <key>g11n</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>tibco.test.suite.config.path</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>emsScriptFile1</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>emsScriptFile2</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>lisa.continue.rsp.time</key>
    <value>Set in Step continue</value>
    </Parameter>
    <Parameter>
    <key>firstName</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>tibco.amx.rt.httpconnector1.port</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>emspwd</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>Sending</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>tibco.amx.resourcedef.jndi1.contextfactory</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>tibco.amx.rt.httpconnector1.host</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>teneoResp</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>jmsResp</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>destQueue</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>tibco.amx.resourcedef.jndi1.uname</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>fromAddress</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>message</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>Getting</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>toAddress</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>jmsServiceResp</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>tibco.amx.resourcedef.jms1.connectionFactory</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>ldapQuery</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>tibco.amx.resourcedef.jndi1.contexturl</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>env.name</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>env.node1.name</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>env.node2.name</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>emsUser</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>emsServer</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>host.instance</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>tibco.amx.rt.jdbc1.direct.dbUrl</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>tibco.amx.rt.jdbc1.direct.jdbcDriver</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>host.jmx.port</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>tibco.amx.rt.teneo1.Dialect</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>tibco.amx.rt.ldap1.connectionFactory</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>tibco.amx.rt.smtp1.port</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>tibco.amx.rt.smtp1.referenced.identityJNDIName</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>tibco.amx.rt.jdbc1.referenced.identityJNDIName</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>identityProvider</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>tibco.amx.rt.ldap1.referenced.identityJNDIName</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>tibco.amx.rt.teneo1.dataSor</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>tibco.amx.rt.smtp1.host</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>tibco.amx.rt.ldap1.providerURL</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>jndiconnectionfactory</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>jndicontexturl</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>jndipwd</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>jndiuser</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>jndiport</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>jndihost</key>
    <value>Property From Config</value>
    </Parameter>
    <Parameter>
    <key>lisa.deleteJMSQueue1.rsp.time</key>
    <value>Set in Step deleteJMSQueue1</value>
    </Parameter>
    <Parameter>
    <key>lisa.deleteJMSQueue2.rsp</key>
    <value>Set in Step deleteJMSQueue2</value>
    </Parameter>
    <Parameter>
    <key>lisa.deleteJMSQueue2.rsp.time</key>
    <value>Set in Step deleteJMSQueue2</value>
    </Parameter>
    <Parameter>
    <key>lisa.deleteJMSQueue1.rsp</key>
    <value>Set in Step deleteJMSQueue1</value>
    </Parameter>
    <Parameter>
    <key>lisa.createJndiName1.rsp</key>
    <value>Set in Step createJndiName1</value>
    </Parameter>
    <Parameter>
    <key>lisa.createJndiName1.rsp.time</key>
    <value>Set in Step createJndiName1</value>
    </Parameter>
    <Parameter>
    <key>lisa.createJndiName2.rsp</key>
    <value>Set in Step createJndiName2</value>
    </Parameter>
    <Parameter>
    <key>lisa.createJndiName2.rsp.time</key>
    <value>Set in Step createJndiName2</value>
    </Parameter>
    <Parameter>
    <key>lisa.deployApp.rsp.time</key>
    <value>Set in Step deployApp</value>
    </Parameter>
    <Parameter>
    <key>lisa.invokeJmsService2.rsp</key>
    <value>Set in Step invokeJmsService2</value>
    </Parameter>
    <Parameter>
    <key>lisa.end.rsp</key>
    <value>Set in Step end</value>
    </Parameter>
    <Parameter>
    <key>lisa.end.rsp.time</key>
    <value>Set in Step end</value>
    </Parameter>
    <Parameter>
    <key>lisa.invokeSOAPService.rsp</key>
    <value>Set in Step invokeSOAPService</value>
    </Parameter>
    <Parameter>
    <key>lisa.invokeSOAPService.rsp.time</key>
    <value>Set in Step invokeSOAPService</value>
    </Parameter>
    <Parameter>
    <key>lisa.invokeJmsService2.rsp.time</key>
    <value>Set in Step invokeJmsService2</value>
    </Parameter>
    <Parameter>
    <key>lisa.invokeSOAPJMSService.rsp</key>
    <value>Set in Step invokeSOAPJMSService</value>
    </Parameter>
    <Parameter>
    <key>lisa.invokeSOAPJMSService.rsp.time</key>
    <value>Set in Step invokeSOAPJMSService</value>
    </Parameter>
    <Parameter>
    <key>lisa.undeployApp.rsp.time</key>
    <value>Set in Step undeployApp</value>
    </Parameter>
    <Parameter>
    <key>lisa.continue.rsp</key>
    <value>Set in Step continue</value>
    </Parameter>
    <Parameter>
    <key>lisa.deployApp.rsp</key>
    <value>Set in Step deployApp</value>
    </Parameter>
    <Parameter>
    <key>lisa.invokeService-Case1.rsp</key>
    <value>Set in Step invokeService-Case1</value>
    </Parameter>
    <Parameter>
    <key>lisa.invokeService-Case1.rsp.time</key>
    <value>Set in Step invokeService-Case1</value>
    </Parameter>
    <Parameter>
    <key>lisa.invokeService-Case2.rsp</key>
    <value>Set in Step invokeService-Case2</value>
    </Parameter>
    <Parameter>
    <key>lisa.invokeService-Case2.rsp.time</key>
    <value>Set in Step invokeService-Case2</value>
    </Parameter>
    <Parameter>
    <key>lisa.invokeService-Case4.rsp.time</key>
    <value>Set in Step invokeService-Case4</value>
    </Parameter>
    <Parameter>
    <key>lisa.invokeService-Case3.rsp</key>
    <value>Set in Step invokeService-Case3</value>
    </Parameter>
    <Parameter>
    <key>lisa.invokeService-Case3.rsp.time</key>
    <value>Set in Step invokeService-Case3</value>
    </Parameter>
    <Parameter>
    <key>lisa.invokeService-Case4.rsp</key>
    <value>Set in Step invokeService-Case4</value>
    </Parameter>
    <Parameter>
    <key>lisa.undeployApp.rsp</key>
    <value>Set in Step undeployApp</value>
    </Parameter>
    <Parameter>
    <key>lisa.continue (quiet).rsp</key>
    <value>Set in Step continue (quiet)</value>
    </Parameter>
    <Parameter>
    <key>lisa.continue (quiet).rsp.time</key>
    <value>Set in Step continue (quiet)</value>
    </Parameter>
</resultState>

      <Companion type="com.itko.lisa.test.PropReaderCompanion" >
<type>Name-Value-Pairs</type>
<file>{{LISA_TC_PATH}}/data{{g11n}}.txt</file>
      </Companion>

      <Companion type="com.tibco.lisa.amx.AmxCompanion" >
    <datafile>{{LISA_TC_PATH}}/amxdata.xml</datafile>
    <clidatafileppty>tibco.amx.datafile.tc</clidatafileppty>
    <buildfile>{{LISA_TC_PATH}}/amxbuild.xml</buildfile>
    <clibuildfileppty>tibco.amx.buildfile.tc</clibuildfileppty>
      </Companion>

<Configurations>
<Configuration>
<name>runtime</name>
<external>true</external>
<doc>{{LISA_TC_PATH}}/../2node_hsql{{g11n}}.config</doc>
</Configuration>
</Configurations>
    <Node name="invokeService-Case1" log="In Java3 throw undeclared fault1. Catch it in Java2 and throw soapException after setting faultcode and faultrole, Catch fault thrown by Java2 in Java1 and set new faultcode and faultrole and throw SOAPException to the client"
          type="com.itko.lisa.esb.jndi.GeneralJndiJmsStep" 
          version="1" 
          think="0-0" 
 useFilters="true" 
 quiet="false" 
          next="invokeService-Case2" > 

<graphx>130</graphx>
<graphy>130</graphy>
<Documentation>In Java3 throw undeclared fault1.&#13;&#10;Catch it in Java2 and throw soapException after setting faultcode and faultrole,&#13;&#10;Catch fault thrown by Java2 in Java1 and set new faultcode and faultrole and throw SOAPException to the client</Documentation>
<msgVersion>2</msgVersion>
<autoExtractPayLoad>true</autoExtractPayLoad>
<pubEnabledType>true</pubEnabledType>
<subEnabledType>true</subEnabledType>
<repEnabledType>true</repEnabledType>
<repTempQ>false</repTempQ>
<pubWithTrans>false</pubWithTrans>
<subWithTrans>false</subWithTrans>
<keepConnection>false</keepConnection>
<sharePublisher>false</sharePublisher>
<connectionType>JNDI</connectionType>
<lisa.prefill.jndiFactories>com.tibco.tibjms.naming.TibjmsInitialContextFactory</lisa.prefill.jndiFactories>
<lisa.prefill.jndiServerURLs>{{jndicontexturl}}</lisa.prefill.jndiServerURLs>
<jndiDataSourceName>{{jndiconnectionfactory}}</jndiDataSourceName>
<lisa.prefill.jndiServerUsers>{{jndiuser}}</lisa.prefill.jndiServerUsers>
<lisa.prefill.jndiServerPWD_enc>34217a08786790ce9aa26862f7885c16</lisa.prefill.jndiServerPWD_enc>
<mqHost></mqHost>
<mqPort></mqPort>
<mqChannel></mqChannel>
<mqQManager></mqQManager>
<mqCCID>-1</mqCCID>
<mqSecurityExit></mqSecurityExit>
<mqSendExit></mqSendExit>
<mqReceiveExit></mqReceiveExit>
<mqConnMode>JMS</mqConnMode>
<mqReplyToQMgrName></mqReplyToQMgrName>
<mqTempQModel></mqTempQModel>
<mqOverrideQMan></mqOverrideQMan>
<mqUseCorrelationIDOnSubscribe>false</mqUseCorrelationIDOnSubscribe>
<mqEnvProperties>
</mqEnvProperties>
<mqExtMsgProperties>
</mqExtMsgProperties>
<tibRvService>7522:7524</tibRvService>
<tibRvNetwork></tibRvNetwork>
<tibRvDaemon></tibRvDaemon>
<tibRvConnMode>Native Client</tibRvConnMode>
<tibRvSendFieldName></tibRvSendFieldName>
<tibRvUseCMsg>false</tibRvUseCMsg>
<tibRvInBoxType>false</tibRvInBoxType>
<tibRvInBoxReplyMode>false</tibRvInBoxReplyMode>
<tibRvCmConfirmAdvisorySubject>_RV.INFO.RVCM.DELIVERY.CONFIRM.&gt;</tibRvCmConfirmAdvisorySubject>
<secondLevelAuthEnabled>true</secondLevelAuthEnabled>
<secondLevelAuthUser>{{jmsuser}}</secondLevelAuthUser>
<secondLevelAuthPwd>{{jmspwd}}</secondLevelAuthPwd>
<wmBrokerHost>localhost</wmBrokerHost>
<wmBrokerPort>6849</wmBrokerPort>
<wmBrokerName></wmBrokerName>
<wmBrokerCID></wmBrokerCID>
<wmBrokerClientGroup></wmBrokerClientGroup>
<wmBrokerClientAppName>LISA</wmBrokerClientAppName>
<wmBrokerDeliverEnabled>false</wmBrokerDeliverEnabled>
<wmBrokerEventConvertRsp>false</wmBrokerEventConvertRsp>
<wmBrokerEventConvertRspXML>false</wmBrokerEventConvertRspXML>
<sonicBrokerHost>localhost</sonicBrokerHost>
<sonicBrokerPort>2506</sonicBrokerPort>
<sonicBrokerUser></sonicBrokerUser>
<sonicBrokerPwd></sonicBrokerPwd>
<jcapsHost></jcapsHost>
<jcapsPort></jcapsPort>
<pubDestType>Queue</pubDestType>
<pubDestination>{{queueName2}}</pubDestination>
<subDestType>Queue</subDestType>
<subDestination>{{queueName2}}</subDestination>
<subTimeout>30</subTimeout>
<repDestination>{{queueName2}}</repDestination>
<repDestType>Queue</repDestType>
<durableSessionKey></durableSessionKey>
<sendMsgType>Text</sendMsgType>
<sendMessage>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#13;&#10;&lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;&#13;&#10;  &lt;soapenv:Body&gt;&#13;&#10;    &lt;GreetOperation xmlns=&quot;http://www.example.org/BAT521WSDL/&quot;&gt;&#13;&#10;      &lt;in xmlns=&quot;&quot;&gt;{{in1}}&lt;/in&gt;&#13;&#10;    &lt;/GreetOperation&gt;&#13;&#10;  &lt;/soapenv:Body&gt;&#13;&#10;&lt;/soapenv:Envelope&gt;&#13;&#10;</sendMessage>
<jmsMessageObject>
</jmsMessageObject>
<onExNode>fail</onExNode>
<customProperties>
    <Parameter>
    <key>soapAction</key>
    <value>GreetOperation</value>
    <name>Name</name>
    </Parameter>
</customProperties>
<customConnProperties>
    <Parameter>
    <key>soapAction</key>
    <value>GreetOperation</value>
    <name>Name</name>
    </Parameter>
</customConnProperties>
<asyncPropKey></asyncPropKey>

      <!-- Result Elements -->
<CheckResult assertTrue="false" name="Assert155" type="com.itko.lisa.test.CheckResultContains">
<log>Assert [Assert145] fired false of type Result as String Contains Given String</log>
<then>fail</then>
<valueToAssertKey></valueToAssertKey>
        <param>{{Case1resp1}}</param>
</CheckResult>

<CheckResult assertTrue="false" name="Assert116" type="com.itko.lisa.test.CheckResultContains">
<log>Assert [Assert116] fired false of type Result as String Contains Given String</log>
<then>fail</then>
<valueToAssertKey></valueToAssertKey>
        <param>{{Case1resp2}}</param>
</CheckResult>

<CheckResult assertTrue="false" name="Assert152" type="com.itko.lisa.test.CheckResultContains">
<log>Assert [Assert152] fired false of type Result as String Contains Given String</log>
<then>fail</then>
<valueToAssertKey></valueToAssertKey>
        <param>{{Case1resp3}}</param>
</CheckResult>

    </Node>


    <Node name="invokeService-Case2" log="SoapException has 2 constructors so repeat Case1 but this time use different constructor (constructor with code as string)"
          type="com.itko.lisa.esb.jndi.GeneralJndiJmsStep" 
          version="1" 
          think="0-0" 
 useFilters="true" 
 quiet="false" 
          next="invokeService-Case3" > 

<graphx>130</graphx>
<graphy>130</graphy>
<Documentation>SoapException has 2 constructors so repeat Case1 but this time use different constructor (constructor with code as string)</Documentation>
<msgVersion>2</msgVersion>
<autoExtractPayLoad>true</autoExtractPayLoad>
<pubEnabledType>true</pubEnabledType>
<subEnabledType>true</subEnabledType>
<repEnabledType>true</repEnabledType>
<repTempQ>false</repTempQ>
<pubWithTrans>false</pubWithTrans>
<subWithTrans>false</subWithTrans>
<keepConnection>false</keepConnection>
<sharePublisher>false</sharePublisher>
<connectionType>JNDI</connectionType>
<lisa.prefill.jndiFactories>com.tibco.tibjms.naming.TibjmsInitialContextFactory</lisa.prefill.jndiFactories>
<lisa.prefill.jndiServerURLs>{{jndicontexturl}}</lisa.prefill.jndiServerURLs>
<jndiDataSourceName>{{jndiconnectionfactory}}</jndiDataSourceName>
<lisa.prefill.jndiServerUsers>{{jndiuser}}</lisa.prefill.jndiServerUsers>
<lisa.prefill.jndiServerPWD_enc>34217a08786790ce9aa26862f7885c16</lisa.prefill.jndiServerPWD_enc>
<mqPort></mqPort>
<mqCCID>-1</mqCCID>
<mqConnMode>JMS</mqConnMode>
<mqOverrideQMan></mqOverrideQMan>
<mqUseCorrelationIDOnSubscribe>false</mqUseCorrelationIDOnSubscribe>
<mqEnvProperties>
</mqEnvProperties>
<mqExtMsgProperties>
</mqExtMsgProperties>
<tibRvService>7522:7524</tibRvService>
<tibRvConnMode>Native Client</tibRvConnMode>
<tibRvUseCMsg>false</tibRvUseCMsg>
<tibRvInBoxType>false</tibRvInBoxType>
<tibRvInBoxReplyMode>false</tibRvInBoxReplyMode>
<tibRvCmConfirmAdvisorySubject>_RV.INFO.RVCM.DELIVERY.CONFIRM.&gt;</tibRvCmConfirmAdvisorySubject>
<secondLevelAuthEnabled>true</secondLevelAuthEnabled>
<secondLevelAuthUser>{{jmsuser}}</secondLevelAuthUser>
<secondLevelAuthPwd>{{jmspwd}}</secondLevelAuthPwd>
<wmBrokerHost>localhost</wmBrokerHost>
<wmBrokerPort>6849</wmBrokerPort>
<wmBrokerClientAppName>LISA</wmBrokerClientAppName>
<wmBrokerDeliverEnabled>false</wmBrokerDeliverEnabled>
<wmBrokerEventConvertRsp>false</wmBrokerEventConvertRsp>
<wmBrokerEventConvertRspXML>false</wmBrokerEventConvertRspXML>
<sonicBrokerHost>localhost</sonicBrokerHost>
<sonicBrokerPort>2506</sonicBrokerPort>
<pubDestType>Queue</pubDestType>
<pubDestination>{{queueName2}}</pubDestination>
<subDestType>Queue</subDestType>
<subDestination>{{queueName2}}</subDestination>
<subTimeout>30</subTimeout>
<repDestination>{{queueName2}}</repDestination>
<repDestType>Queue</repDestType>
<sendMsgType>Text</sendMsgType>
<sendMessage>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#13;&#10;&lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;&#13;&#10;  &lt;soapenv:Body&gt;&#13;&#10;    &lt;GreetOperation xmlns=&quot;http://www.example.org/BAT521WSDL/&quot;&gt;&#13;&#10;      &lt;in xmlns=&quot;&quot;&gt;{{in2}}&lt;/in&gt;&#13;&#10;    &lt;/GreetOperation&gt;&#13;&#10;  &lt;/soapenv:Body&gt;&#13;&#10;&lt;/soapenv:Envelope&gt;&#13;&#10;</sendMessage>
<jmsMessageObject>
</jmsMessageObject>
<onExNode>fail</onExNode>
<customProperties>
    <Parameter>
    <key>soapAction</key>
    <value>GreetOperation</value>
    <name>Name</name>
    </Parameter>
</customProperties>
<customConnProperties>
    <Parameter>
    <key>soapAction</key>
    <value>GreetOperation</value>
    <name>Name</name>
    </Parameter>
</customConnProperties>

      <!-- Result Elements -->
<CheckResult assertTrue="false" name="Assert255" type="com.itko.lisa.test.CheckResultContains">
<log>Assert [Assert145] fired false of type Result as String Contains Given String</log>
<then>fail</then>
<valueToAssertKey></valueToAssertKey>
        <param>{{Case2resp1}}</param>
</CheckResult>

<CheckResult assertTrue="false" name="Assert216" type="com.itko.lisa.test.CheckResultContains">
<log>Assert [Assert116] fired false of type Result as String Contains Given String</log>
<then>fail</then>
<valueToAssertKey></valueToAssertKey>
        <param>{{Case2resp2}}</param>
</CheckResult>

<CheckResult assertTrue="false" name="Assert252" type="com.itko.lisa.test.CheckResultContains">
<log>Assert [Assert152] fired false of type Result as String Contains Given String</log>
<then>fail</then>
<valueToAssertKey></valueToAssertKey>
        <param>{{Case2resp3}}</param>
</CheckResult>

    </Node>


    <Node name="invokeService-Case3" log="In Java3 throw declared fault with null detail, Java2 should receive it as soapexception. Catch it in Java1 and throw the same from Java1 to client."
          type="com.itko.lisa.esb.jndi.GeneralJndiJmsStep" 
          version="1" 
          think="0-0" 
 useFilters="true" 
 quiet="false" 
          next="invokeService-Case4" > 

<graphx>130</graphx>
<graphy>130</graphy>
<Documentation>In Java3 throw declared fault with null detail,&#13;&#10;Java2 should receive it as soapexception.&#13;&#10;Catch it in Java1 and throw the same from Java1 to client.</Documentation>
<msgVersion>2</msgVersion>
<autoExtractPayLoad>true</autoExtractPayLoad>
<pubEnabledType>true</pubEnabledType>
<subEnabledType>true</subEnabledType>
<repEnabledType>true</repEnabledType>
<repTempQ>false</repTempQ>
<pubWithTrans>false</pubWithTrans>
<subWithTrans>false</subWithTrans>
<keepConnection>false</keepConnection>
<sharePublisher>false</sharePublisher>
<connectionType>JNDI</connectionType>
<lisa.prefill.jndiFactories>com.tibco.tibjms.naming.TibjmsInitialContextFactory</lisa.prefill.jndiFactories>
<lisa.prefill.jndiServerURLs>{{jndicontexturl}}</lisa.prefill.jndiServerURLs>
<jndiDataSourceName>{{jndiconnectionfactory}}</jndiDataSourceName>
<lisa.prefill.jndiServerUsers>{{jndiuser}}</lisa.prefill.jndiServerUsers>
<lisa.prefill.jndiServerPWD_enc>34217a08786790ce9aa26862f7885c16</lisa.prefill.jndiServerPWD_enc>
<mqPort></mqPort>
<mqCCID>-1</mqCCID>
<mqConnMode>JMS</mqConnMode>
<mqOverrideQMan></mqOverrideQMan>
<mqUseCorrelationIDOnSubscribe>false</mqUseCorrelationIDOnSubscribe>
<mqEnvProperties>
</mqEnvProperties>
<mqExtMsgProperties>
</mqExtMsgProperties>
<tibRvService>7522:7524</tibRvService>
<tibRvConnMode>Native Client</tibRvConnMode>
<tibRvUseCMsg>false</tibRvUseCMsg>
<tibRvInBoxType>false</tibRvInBoxType>
<tibRvInBoxReplyMode>false</tibRvInBoxReplyMode>
<tibRvCmConfirmAdvisorySubject>_RV.INFO.RVCM.DELIVERY.CONFIRM.&gt;</tibRvCmConfirmAdvisorySubject>
<secondLevelAuthEnabled>true</secondLevelAuthEnabled>
<secondLevelAuthUser>{{jmsuser}}</secondLevelAuthUser>
<secondLevelAuthPwd>{{jmspwd}}</secondLevelAuthPwd>
<wmBrokerHost>localhost</wmBrokerHost>
<wmBrokerPort>6849</wmBrokerPort>
<wmBrokerClientAppName>LISA</wmBrokerClientAppName>
<wmBrokerDeliverEnabled>false</wmBrokerDeliverEnabled>
<wmBrokerEventConvertRsp>false</wmBrokerEventConvertRsp>
<wmBrokerEventConvertRspXML>false</wmBrokerEventConvertRspXML>
<sonicBrokerHost>localhost</sonicBrokerHost>
<sonicBrokerPort>2506</sonicBrokerPort>
<pubDestType>Queue</pubDestType>
<pubDestination>{{queueName2}}</pubDestination>
<subDestType>Queue</subDestType>
<subDestination>{{queueName2}}</subDestination>
<subTimeout>30</subTimeout>
<repDestination>{{queueName2}}</repDestination>
<repDestType>Queue</repDestType>
<sendMsgType>Text</sendMsgType>
<sendMessage>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#13;&#10;&lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;&#13;&#10;  &lt;soapenv:Body&gt;&#13;&#10;    &lt;GreetOperation xmlns=&quot;http://www.example.org/BAT521WSDL/&quot;&gt;&#13;&#10;      &lt;in xmlns=&quot;&quot;&gt;{{in3}}&lt;/in&gt;&#13;&#10;    &lt;/GreetOperation&gt;&#13;&#10;  &lt;/soapenv:Body&gt;&#13;&#10;&lt;/soapenv:Envelope&gt;&#13;&#10;</sendMessage>
<jmsMessageObject>
</jmsMessageObject>
<onExNode>fail</onExNode>
<customProperties>
    <Parameter>
    <key>soapAction</key>
    <value>GreetOperation</value>
    <name>Name</name>
    </Parameter>
</customProperties>
<customConnProperties>
    <Parameter>
    <key>soapAction</key>
    <value>GreetOperation</value>
    <name>Name</name>
    </Parameter>
</customConnProperties>

      <!-- Result Elements -->
<CheckResult assertTrue="false" name="Assert345" type="com.itko.lisa.test.CheckResultContains">
<log>Assert [Assert145] fired false of type Result as String Contains Given String</log>
<then>fail</then>
<valueToAssertKey></valueToAssertKey>
        <param>{{Case3resp1}}</param>
</CheckResult>

<CheckResult assertTrue="false" name="Assert316" type="com.itko.lisa.test.CheckResultContains">
<log>Assert [Assert116] fired false of type Result as String Contains Given String</log>
<then>fail</then>
<valueToAssertKey></valueToAssertKey>
        <param>{{Case3resp2}}</param>
</CheckResult>

<CheckResult assertTrue="false" name="Assert352" type="com.itko.lisa.test.CheckResultContains">
<log>Assert [Assert152] fired false of type Result as String Contains Given String</log>
<then>fail</then>
<valueToAssertKey></valueToAssertKey>
        <param>{{Case3resp3}}</param>
</CheckResult>

    </Node>


    <Node name="invokeService-Case4" log="Create and throw SoapException in Java1"
          type="com.itko.lisa.esb.jndi.GeneralJndiJmsStep" 
          version="1" 
          think="0-0" 
 useFilters="true" 
 quiet="false" 
          next="undeployApp" > 

<graphx>130</graphx>
<graphy>130</graphy>
<Documentation>Create and throw SoapException in Java1 itself</Documentation>
<msgVersion>2</msgVersion>
<autoExtractPayLoad>true</autoExtractPayLoad>
<pubEnabledType>true</pubEnabledType>
<subEnabledType>true</subEnabledType>
<repEnabledType>true</repEnabledType>
<repTempQ>false</repTempQ>
<pubWithTrans>false</pubWithTrans>
<subWithTrans>false</subWithTrans>
<keepConnection>false</keepConnection>
<sharePublisher>false</sharePublisher>
<connectionType>JNDI</connectionType>
<lisa.prefill.jndiFactories>com.tibco.tibjms.naming.TibjmsInitialContextFactory</lisa.prefill.jndiFactories>
<lisa.prefill.jndiServerURLs>{{jndicontexturl}}</lisa.prefill.jndiServerURLs>
<jndiDataSourceName>{{jndiconnectionfactory}}</jndiDataSourceName>
<lisa.prefill.jndiServerUsers>{{jndiuser}}</lisa.prefill.jndiServerUsers>
<lisa.prefill.jndiServerPWD_enc>34217a08786790ce9aa26862f7885c16</lisa.prefill.jndiServerPWD_enc>
<mqPort></mqPort>
<mqCCID>-1</mqCCID>
<mqConnMode>JMS</mqConnMode>
<mqOverrideQMan></mqOverrideQMan>
<mqUseCorrelationIDOnSubscribe>false</mqUseCorrelationIDOnSubscribe>
<mqEnvProperties>
</mqEnvProperties>
<mqExtMsgProperties>
</mqExtMsgProperties>
<tibRvService>7522:7524</tibRvService>
<tibRvConnMode>Native Client</tibRvConnMode>
<tibRvUseCMsg>false</tibRvUseCMsg>
<tibRvInBoxType>false</tibRvInBoxType>
<tibRvInBoxReplyMode>false</tibRvInBoxReplyMode>
<tibRvCmConfirmAdvisorySubject>_RV.INFO.RVCM.DELIVERY.CONFIRM.&gt;</tibRvCmConfirmAdvisorySubject>
<secondLevelAuthEnabled>true</secondLevelAuthEnabled>
<secondLevelAuthUser>{{jmsuser}}</secondLevelAuthUser>
<secondLevelAuthPwd>{{jmspwd}}</secondLevelAuthPwd>
<wmBrokerHost>localhost</wmBrokerHost>
<wmBrokerPort>6849</wmBrokerPort>
<wmBrokerClientAppName>LISA</wmBrokerClientAppName>
<wmBrokerDeliverEnabled>false</wmBrokerDeliverEnabled>
<wmBrokerEventConvertRsp>false</wmBrokerEventConvertRsp>
<wmBrokerEventConvertRspXML>false</wmBrokerEventConvertRspXML>
<sonicBrokerHost>localhost</sonicBrokerHost>
<sonicBrokerPort>2506</sonicBrokerPort>
<pubDestType>Queue</pubDestType>
<pubDestination>{{queueName2}}</pubDestination>
<subDestType>Queue</subDestType>
<subDestination>{{queueName2}}</subDestination>
<subTimeout>30</subTimeout>
<repDestination>{{queueName2}}</repDestination>
<repDestType>Queue</repDestType>
<sendMsgType>Text</sendMsgType>
<sendMessage>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#13;&#10;&lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;&#13;&#10;  &lt;soapenv:Body&gt;&#13;&#10;    &lt;GreetOperation xmlns=&quot;http://www.example.org/BAT521WSDL/&quot;&gt;&#13;&#10;      &lt;in xmlns=&quot;&quot;&gt;{{in4}}&lt;/in&gt;&#13;&#10;    &lt;/GreetOperation&gt;&#13;&#10;  &lt;/soapenv:Body&gt;&#13;&#10;&lt;/soapenv:Envelope&gt;&#13;&#10;</sendMessage>
<jmsMessageObject>
</jmsMessageObject>
<onExNode>fail</onExNode>
<customProperties>
    <Parameter>
    <key>soapAction</key>
    <value>GreetOperation</value>
    <name>Name</name>
    </Parameter>
</customProperties>
<customConnProperties>
    <Parameter>
    <key>soapAction</key>
    <value>GreetOperation</value>
    <name>Name</name>
    </Parameter>
</customConnProperties>

      <!-- Result Elements -->
<CheckResult assertTrue="false" name="Assert445" type="com.itko.lisa.test.CheckResultContains">
<log>Assert [Assert145] fired false of type Result as String Contains Given String</log>
<then>fail</then>
<valueToAssertKey></valueToAssertKey>
        <param>{{Case4resp1}}</param>
</CheckResult>

<CheckResult assertTrue="false" name="Assert416" type="com.itko.lisa.test.CheckResultContains">
<log>Assert [Assert116] fired false of type Result as String Contains Given String</log>
<then>fail</then>
<valueToAssertKey></valueToAssertKey>
        <param>{{Case4resp2}}</param>
</CheckResult>

<CheckResult assertTrue="false" name="Assert452" type="com.itko.lisa.test.CheckResultContains">
<log>Assert [Assert152] fired false of type Result as String Contains Given String</log>
<then>fail</then>
<valueToAssertKey></valueToAssertKey>
        <param>{{Case4resp3}}</param>
</CheckResult>

    </Node>


    <Node name="undeployApp" log=""
          type="com.itko.lisa.utils.ExecSubProcessNode" 
          version="1" 
          think="0-0" 
 useFilters="true" 
 quiet="false" 
          next="Re-Deploy" > 

<graphx>3328</graphx>
<graphy>419</graphy>
<Documentation></Documentation>
<remoteServer>local</remoteServer>
<Subprocess>{{TIBCO_COMMON_LIBRARY}}/com/tibco/lisa/util/InvokeAnt.tst</Subprocess>
<getEvents>0</getEvents>
<sendConfig>true</sendConfig>
<fullyParseProps>true</fullyParseProps>
<sendCommonState>false</sendCommonState>
<getCommonState>false</getCommonState>
<onFail>continue (quiet)</onFail>
<Parameters>
    <Parameter>
    <key>projectBaseDirName</key>
    <value></value>
    <name>Absolute path of the project base Directory. Optional.</name>
    </Parameter>
    <Parameter>
    <key>buildFileName</key>
    <value>{{tibco.amx.buildfile.tc}}</value>
    <name>Absolute path of the Ant build file. Required.</name>
    </Parameter>
    <Parameter>
    <key>logFileName</key>
    <value>{{tibco.test.case.log.dir}}/ant_undeploy.log</value>
    <name>Absolute path to the Ant log file. Optional.</name>
    </Parameter>
    <Parameter>
    <key>targetName</key>
    <value>undeploy.app</value>
    <name>Name of the build target to be invoked. Optional.</name>
    </Parameter>
    <Parameter>
    <key>propertyFileName</key>
    <value></value>
    <name>Absolute path of the file which contains the property name/value pairs. Optional</name>
    </Parameter>
    <Parameter>
    <key>propertyList</key>
    <value>deployTimeout=600,TIBCO_HOME={{TIBCO_HOME}},TIBCO_AMXADMIN_HOME={{TIBCO_AMXADMIN_HOME}},TIBCO_AMX_LIBRARY={{TIBCO_AMX_LIBRARY}},amxConfigFile={{tibco.amx.datafile.tc}},remotePropsFile={{tibco.test.suite.config.path}}</value>
    <name>Name value pairs seperated by comma. ex: name1=value1,name2=value2,.. etc. This can be used in addition to passing property file. Optional</name>
    </Parameter>
    <Parameter>
    <key>antOpts</key>
    <value>-Djava.classes.dir=/{{TIBCO_JAVA_HOME}}/jre/lib</value>
    <name>ANT_OPTS environment variable. Optional. Ex: -Xms128m -Xmx512m -XX:PermSize=256m</name>
    </Parameter>
    <Parameter>
    <key>additionalAntCmdLineArgs</key>
    <value></value>
    <name>Additional ant commandline options. Optional. See ant --help for these options.</name>
    </Parameter>
    <Parameter>
    <key>additionalClasspath</key>
    <value></value>
    <name>Additional classpath to add to Ant. Optional.</name>
    </Parameter>
    <Parameter>
    <key>waitForCompletion</key>
    <value>true</value>
    </Parameter>
    <Parameter>
    <key>timeout</key>
    <value>610</value>
    <name>Timeout in seconds for ant command. Required only if waitForCompletion is true</name>
    </Parameter>
</Parameters>
<SaveProps>
</SaveProps>

      <!-- Result Elements -->
<CheckResult assertTrue="false" name="Assert245" type="com.itko.lisa.test.CheckResultContains">
<log>Un-Deployment failed</log>
<then>fail</then>
<valueToAssertKey></valueToAssertKey>
        <param>BUILD SUCCESSFUL</param>
</CheckResult>

    </Node>


    <Node name="Re-Deploy" log=""
          type="com.itko.lisa.utils.ExecSubProcessNode" 
          version="1" 
          think="0-0" 
 useFilters="true" 
 quiet="false" 
          next="end" > 

<graphx>1885</graphx>
<graphy>4145</graphy>
<Subprocess>{{TIBCO_COMMON_LIBRARY}}/com/tibco/lisa/util/InvokeAnt.tst</Subprocess>
<getEvents>0</getEvents>
<sendConfig>true</sendConfig>
<fullyParseProps>true</fullyParseProps>
<sendCommonState>false</sendCommonState>
<getCommonState>false</getCommonState>
<onFail>fail</onFail>
<Parameters>
    <Parameter>
    <key>projectBaseDirName</key>
    <value></value>
    <name>Absolute path of the project base Directory. Optional.</name>
    </Parameter>
    <Parameter>
    <key>buildFileName</key>
    <value>{{tibco.amx.buildfile.tc}}</value>
    <name>Absolute path of the Ant build file. Required.</name>
    </Parameter>
    <Parameter>
    <key>logFileName</key>
    <value>{{tibco.test.case.log.dir}}/ant_deploy.log</value>
    <name>Absolute path to the Ant log file. Optional.</name>
    </Parameter>
    <Parameter>
    <key>targetName</key>
    <value>deploy.app</value>
    <name>Name of the build target to be invoked. Optional.</name>
    </Parameter>
    <Parameter>
    <key>propertyFileName</key>
    <value></value>
    <name>Absolute path of the file which contains the property name/value pairs. Optional</name>
    </Parameter>
    <Parameter>
    <key>propertyList</key>
    <value>deployTimeout=600,TIBCO_HOME={{TIBCO_HOME}},TIBCO_AMXADMIN_HOME={{TIBCO_AMXADMIN_HOME}},TIBCO_AMX_LIBRARY={{TIBCO_AMX_LIBRARY}},amxConfigFile={{tibco.amx.datafile.tc}},remotePropsFile={{tibco.test.suite.config.path}}</value>
    <name>Name value pairs seperated by comma. ex: name1=value1,name2=value2,.. etc. This can be used in addition to passing property file. Optional</name>
    </Parameter>
    <Parameter>
    <key>antOpts</key>
    <value>-Djava.classes.dir=/{{TIBCO_JAVA_HOME}}/jre/lib</value>
    <name>ANT_OPTS environment variable. Optional. Ex: -Xms128m -Xmx512m -XX:PermSize=256m</name>
    </Parameter>
    <Parameter>
    <key>additionalAntCmdLineArgs</key>
    <value></value>
    <name>Additional ant commandline options. Optional. See ant --help for these options.</name>
    </Parameter>
    <Parameter>
    <key>additionalClasspath</key>
    <value></value>
    <name>Additional classpath to add to Ant. Optional.</name>
    </Parameter>
    <Parameter>
    <key>waitForCompletion</key>
    <value>true</value>
    </Parameter>
    <Parameter>
    <key>timeout</key>
    <value>600</value>
    <name>Timeout in seconds for ant command. Required only if waitForCompletion is true</name>
    </Parameter>
</Parameters>
<SaveProps>
</SaveProps>

      <!-- Result Elements -->
<CheckResult assertTrue="false" name="Assert145" type="com.itko.lisa.test.CheckResultContains">
<log>Deployment failed</log>
<then>fail</then>
<valueToAssertKey></valueToAssertKey>
        <param>BUILD SUCCESSFUL</param>
</CheckResult>

    </Node>


    <Node name="fail" log=""
          type="com.itko.lisa.test.Abend" 
          version="1" 
          think="0-0" 
 useFilters="true" 
 quiet="true" 
          next="unknown" > 

<graphx>610</graphx>
<graphy>610</graphy>
    </Node>


    <Node name="end" log=""
          type="com.itko.lisa.test.NormalEnd" 
          version="1" 
          think="0-0" 
 useFilters="true" 
 quiet="true" 
          next="fail" > 

<graphx>730</graphx>
<graphy>730</graphy>
    </Node>


</TestCase>
